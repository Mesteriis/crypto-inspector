# ==================================================================================
# –ì–õ–ê–í–ù–´–ô –î–ê–®–ë–û–†–î HOME ASSISTANT
# ==================================================================================
# –ü–µ—Ä–µ–ø–∏—Å–∞–Ω –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ HA 2024+
# Sections view —Å –Ω–∞—Ç–∏–≤–Ω—ã–º–∏ —Å–∫–ª–∞–¥—ã–≤–∞—é—â–∏–º–∏—Å—è —Å–µ–∫—Ü–∏—è–º–∏
# ==================================================================================

views:
  # ==============================================================================
  # VIEW 1: HOME - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
  # ==============================================================================
  - title: Home
    path: home
    icon: mdi:home
    type: sections
    max_columns: 3
    sections:
      # --------------------------------------------------------------------------
      # –≠–ö–û–°–ò–°–¢–ï–ú–ê - –°–¢–ê–¢–£–°
      # --------------------------------------------------------------------------
      - type: grid
        title: "üåü –≠–∫–æ—Å–∏—Å—Ç–µ–º–∞"
        cards:
          - type: tile
            entity: sensor.ecosystem_status
            name: "–°—Ç–∞—Ç—É—Å"
            icon: mdi:home-heart
            color: >
              {% set st = states('sensor.ecosystem_status') %}
              {% if st == 'optimal' %}green
              {% elif st == 'good' %}light-green
              {% elif st == 'attention' %}orange
              {% else %}red{% endif %}
          - type: tile
            entity: sensor.day_mode
            name: "–†–µ–∂–∏–º –¥–Ω—è"
          - type: tile
            entity: sensor.house_mood
            name: "–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ"
          - type: tile
            entity: sensor.cognitive_load
            name: "–ù–∞–≥—Ä—É–∑–∫–∞"
          - type: markdown
            content: |
              ### {{ state_attr('sensor.ecosystem_status', 'emoji') | default('üè†') }} {{ state_attr('sensor.ecosystem_status', 'state_ru') | default('–ó–∞–≥—Ä—É–∑–∫–∞...') }}

              **–†–µ–∂–∏–º:** {{ state_attr('sensor.day_mode', 'state_ru') | default('–ó–∞–≥—Ä—É–∑–∫–∞...') }}

              **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** {{ state_attr('sensor.next_best_action', 'action_ru') | default('–ó–∞–≥—Ä—É–∑–∫–∞...') }}

              ---
              {{ state_attr('sensor.ecosystem_status', 'summary_ru') | default('–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...') }}

      # --------------------------------------------------------------------------
      # –ü–û–ì–û–î–ê
      # --------------------------------------------------------------------------
      - type: grid
        cards:
          - type: weather-forecast
            entity: weather.forecast_home_assistant
            forecast_type: daily

      # --------------------------------------------------------------------------
      # –°–ï–ú–¨–Ø –ò –î–û–ú
      # --------------------------------------------------------------------------
      - type: grid
        title: "üë®‚Äçüë©‚Äçüëß –°–µ–º—å—è"
        cards:
          - type: tile
            entity: person.aleksandr_meshcheriakov
            name: "AVM"
            icon: mdi:face-man
            vertical: true
          - type: tile
            entity: person.victoria_meshchryakovf
            name: "VEM"
            icon: mdi:face-woman
            vertical: true
          - type: tile
            entity: sensor.house_activity
            name: "–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å"
          - type: tile
            entity: binary_sensor.someone_home
            name: "–î–æ–º–∞"

      # --------------------------------------------------------------------------
      # –í–´–•–û–î –ù–ê –£–õ–ò–¶–£
      # --------------------------------------------------------------------------
      - type: grid
        title: "üö∂ –í—ã—Ö–æ–¥ –Ω–∞ —É–ª–∏—Ü—É"
        cards:
          - type: tile
            entity: sensor.go_out_score
            name: "–û—Ü–µ–Ω–∫–∞"
            color: >
              {% set score = states('sensor.go_out_score') | int(50) %}
              {% if score >= 70 %}green
              {% elif score >= 50 %}light-green
              {% elif score >= 30 %}orange
              {% else %}red{% endif %}
          - type: tile
            entity: sensor.city_stress_index
            name: "–°—Ç—Ä–µ—Å—Å –≥–æ—Ä–æ–¥–∞"
          - type: tile
            entity: binary_sensor.perfect_walk_time
            name: "–í—Ä–µ–º—è –ø—Ä–æ–≥—É–ª–∫–∏"
            color: green
          - type: markdown
            content: |
              ### {{ state_attr('sensor.go_out_score', 'level_emoji') | default('üå§Ô∏è') }} {{ state_attr('sensor.go_out_score', 'level_ru') | default('–ó–∞–≥—Ä—É–∑–∫–∞...') }} ({{ states('sensor.go_out_score') | default(50) }}%)

              {{ state_attr('sensor.go_out_score', 'recommendation_ru') | default('–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...') }}

              **–ü—Ä–æ–±–ª–µ–º—ã:** {{ state_attr('sensor.go_out_score', 'all_issues_ru') | default('–ó–∞–≥—Ä—É–∑–∫–∞...') }}

      # --------------------------------------------------------------------------
      # –ú–û–†–ï –ò –í–û–õ–ù–´
      # --------------------------------------------------------------------------
      - type: grid
        title: "üåä –ú–æ—Ä–µ"
        cards:
          - type: tile
            entity: sensor.sea_temperature_openmeteo
            name: "–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –º–æ—Ä—è"
            icon: mdi:thermometer-water
          - type: tile
            entity: sensor.wave_height
            name: "–í—ã—Å–æ—Ç–∞ –≤–æ–ª–Ω"
            icon: mdi:waves
          - type: tile
            entity: sensor.swimming_conditions
            name: "–£—Å–ª–æ–≤–∏—è –∫—É–ø–∞–Ω–∏—è"
            icon: mdi:swim
          - type: tile
            entity: sensor.uv_index
            name: "UV –∏–Ω–¥–µ–∫—Å"
            icon: mdi:white-balance-sunny

      # --------------------------------------------------------------------------
      # –ü–û–ì–û–î–ê –ò –ö–û–ú–§–û–†–¢
      # --------------------------------------------------------------------------
      - type: grid
        title: "üå§Ô∏è –ü–æ–≥–æ–¥–∞"
        cards:
          - type: tile
            entity: sensor.temperature
            name: "–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞"
            icon: mdi:thermometer
          - type: tile
            entity: sensor.humidity
            name: "–í–ª–∞–∂–Ω–æ—Å—Ç—å"
            icon: mdi:water-percent
          - type: tile
            entity: sensor.precipitation_probability
            name: "–û—Å–∞–¥–∫–∏"
            icon: mdi:weather-rainy
          - type: tile
            entity: sensor.wind_speed
            name: "–í–µ—Ç–µ—Ä"
            icon: mdi:weather-windy
          - type: tile
            entity: sensor.perfect_day_index
            name: "–ò–¥–µ–∞–ª—å–Ω—ã–π –¥–µ–Ω—å"
            icon: mdi:star

      # --------------------------------------------------------------------------
      # –ê–°–¢–†–û–ù–û–ú–ò–Ø
      # --------------------------------------------------------------------------
      - type: grid
        title: "üåô –ê—Å—Ç—Ä–æ–Ω–æ–º–∏—è"
        cards:
          - type: tile
            entity: sun.sun
            name: "–°–æ–ª–Ω—Ü–µ"
          - type: tile
            entity: sensor.sun2_next_sunrise
            name: "–í–æ—Å—Ö–æ–¥"
            icon: mdi:weather-sunset-up
          - type: tile
            entity: sensor.sun2_next_sunset
            name: "–ó–∞–∫–∞—Ç"
            icon: mdi:weather-sunset-down
          - type: tile
            entity: sensor.moon_phase
            name: "–§–∞–∑–∞ –ª—É–Ω—ã"
            icon: mdi:moon-waning-crescent

      # --------------------------------------------------------------------------
      # –ö–ê–ß–ï–°–¢–í–û –í–û–ó–î–£–•–ê
      # --------------------------------------------------------------------------
      - type: grid
        title: "üå¨Ô∏è –ö–∞—á–µ—Å—Ç–≤–æ –≤–æ–∑–¥—É—Ö–∞"
        cards:
          - type: tile
            entity: sensor.air_quality_european_aqi
            name: "AQI"
            icon: mdi:air-filter
          - type: tile
            entity: sensor.pollen_total
            name: "–ü—ã–ª—å—Ü–∞"
            icon: mdi:flower-pollen
          - type: tile
            entity: sensor.saharan_dust_index
            name: "–°–∞—Ö–∞—Ä—Å–∫–∞—è –ø—ã–ª—å"
            icon: mdi:weather-dust

      # --------------------------------------------------------------------------
      # –≠–ù–ï–†–ì–ò–Ø
      # --------------------------------------------------------------------------
      - type: grid
        title: "‚ö° –≠–Ω–µ—Ä–≥–∏—è"
        cards:
          - type: tile
            entity: sensor.electricity_tariff_period
            name: "–¢–∞—Ä–∏—Ñ"
            icon: mdi:clock-outline
          - type: tile
            entity: sensor.electricity_tariff_price
            name: "–¶–µ–Ω–∞"
            icon: mdi:currency-eur
          - type: tile
            entity: sensor.total_localtuya_power
            name: "–ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ"
            icon: mdi:flash

      # --------------------------------------------------------------------------
      # –§–ò–ù–ê–ù–°–´
      # --------------------------------------------------------------------------
      - type: grid
        title: "üí∞ –§–∏–Ω–∞–Ω—Å—ã"
        cards:
          - type: tile
            entity: sensor.bitcoin_price
            name: "Bitcoin"
            icon: mdi:bitcoin
          - type: tile
            entity: sensor.ethereum_price
            name: "Ethereum"
            icon: mdi:ethereum
          - type: tile
            entity: sensor.eur_usd_rate
            name: "EUR/USD"
            icon: mdi:currency-usd
          - type: tile
            entity: sensor.gold_price
            name: "–ó–æ–ª–æ—Ç–æ"
            icon: mdi:gold
          - type: tile
            entity: sensor.silver_price
            name: "–°–µ—Ä–µ–±—Ä–æ"
            icon: mdi:circle-outline
          - type: tile
            entity: sensor.ibex_35
            name: "IBEX 35"
            icon: mdi:chart-line

      # --------------------------------------------------------------------------
      # –¢–†–ê–ù–°–ü–û–†–¢
      # --------------------------------------------------------------------------
      - type: grid
        title: "üöó –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç"
        cards:
          - type: tile
            entity: sensor.traffic_to_barcelona
            name: "–î–æ –ë–∞—Ä—Å–µ–ª–æ–Ω—ã"
            icon: mdi:car
          - type: tile
            entity: sensor.fuel_price_95
            name: "–ë–µ–Ω–∑–∏–Ω 95"
            icon: mdi:gas-station

      # --------------------------------------------------------------------------
      # –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨
      # --------------------------------------------------------------------------
      - type: grid
        title: "üö® –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å"
        cards:
          - type: tile
            entity: sensor.fire_risk_catalonia
            name: "–†–∏—Å–∫ –ø–æ–∂–∞—Ä–æ–≤"
            icon: mdi:fire
          - type: tile
            entity: sensor.earthquakes_nearest
            name: "–ó–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏—è"
            icon: mdi:earth
          - type: tile
            entity: binary_sensor.camera_context_alert
            name: "–ö–∞–º–µ—Ä–∞ –∞–ª–µ—Ä—Ç"
            color: red
          - type: tile
            entity: sensor.camera_privacy_mode
            name: "–†–µ–∂–∏–º –∫–∞–º–µ—Ä"

      # --------------------------------------------------------------------------
      # –ü–ò–¢–û–ú–ï–¶ –ê–ë–†–ò–ö–û–° (–∫—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞)
      # --------------------------------------------------------------------------
      - type: grid
        title: "üêï –ê–±—Ä–∏–∫–æ—Å"
        cards:
          - type: tile
            entity: sensor.abrikos_emotional_state
            name: "–°–æ—Å—Ç–æ—è–Ω–∏–µ"
            color: >
              {% set st = states('sensor.abrikos_emotional_state') %}
              {% if st == 'calm' %}green
              {% elif st == 'playful' %}light-green
              {% elif st == 'tired' %}grey
              {% else %}orange{% endif %}
          - type: tile
            entity: sensor.abrikos_energy_level
            name: "–≠–Ω–µ—Ä–≥–∏—è"
          - type: tile
            entity: binary_sensor.abrikos_needs_attention
            name: "–í–Ω–∏–º–∞–Ω–∏–µ"
            color: red
          - type: markdown
            content: |
              {{ state_attr('sensor.abrikos_emotional_state', 'emoji') | default('üêï') }} **{{ state_attr('sensor.abrikos_emotional_state', 'state_ru') | default('–ó–∞–≥—Ä—É–∑–∫–∞...') }}**

              üéÇ –í–æ–∑—Ä–∞—Å—Ç: {{ state_attr('sensor.abrikos_age', 'age_ru') | default('–ó–∞–≥—Ä—É–∑–∫–∞...') }}

              {{ state_attr('sensor.abrikos_emotional_state', 'recommendation_ru') | default('') }}

  # ==============================================================================
  # VIEW 2: ROOMS - –ö–æ–º–Ω–∞—Ç—ã
  # ==============================================================================
  - title: Rooms
    path: rooms
    icon: mdi:floor-plan
    type: sections
    max_columns: 2
    sections:
      # --------------------------------------------------------------------------
      # –ö–ê–ë–ò–ù–ï–¢
      # --------------------------------------------------------------------------
      - type: grid
        title: "üíº –ö–∞–±–∏–Ω–µ—Ç"
        cards:
          - type: tile
            entity: light.wled
            name: "WLED"
          - type: tile
            entity: light.oblako
            name: "–û–±–ª–∞–∫–æ"
          - type: tile
            entity: light.polki
            name: "–ü–æ–ª–∫–∏"
          - type: tile
            entity: light.liustra_2
            name: "–õ—é—Å—Ç—Ä–∞"
          - type: tile
            entity: switch.labacin_socket_1
            name: "–õ–∞–± –°—Ç–æ–ª"
          - type: tile
            entity: switch.pitanie_ipad_socket_1
            name: "iPad"

      # --------------------------------------------------------------------------
      # –ì–û–°–¢–ò–ù–ê–Ø
      # --------------------------------------------------------------------------
      - type: grid
        title: "üõãÔ∏è –ì–æ—Å—Ç–∏–Ω–∞—è"
        cards:
          - type: tile
            entity: light.lampa_5
            name: "–õ–∞–º–ø–∞ 5"
          - type: tile
            entity: light.liustra
            name: "–õ—é—Å—Ç—Ä–∞"
          - type: tile
            entity: light.lampa_6
            name: "–õ–∞–º–ø–∞ 6"

      # --------------------------------------------------------------------------
      # –ö–õ–ò–ú–ê–¢
      # --------------------------------------------------------------------------
      - type: grid
        title: "üå°Ô∏è –ö–ª–∏–º–∞—Ç"
        cards:
          - type: tile
            entity: sensor.temperatura_kukhnia_temperature
            name: "–ö—É—Ö–Ω—è"
            icon: mdi:thermometer
          - type: tile
            entity: sensor.temperatura_spalnia_temperature
            name: "–°–ø–∞–ª—å–Ω—è"
            icon: mdi:thermometer
          - type: tile
            entity: sensor.temperatura_vannaia_temperature
            name: "–í–∞–Ω–Ω–∞—è"
            icon: mdi:thermometer
          - type: tile
            entity: sensor.temperatura_tualet_temperature
            name: "–¢—É–∞–ª–µ—Ç"
            icon: mdi:thermometer
          - type: tile
            entity: sensor.temperatura_kabinet_temperatura
            name: "–ö–∞–±–∏–Ω–µ—Ç"
            icon: mdi:thermometer

      # --------------------------------------------------------------------------
      # –í–û–ó–î–£–• –í –ü–û–ú–ï–©–ï–ù–ò–ò
      # --------------------------------------------------------------------------
      - type: grid
        title: "üå¨Ô∏è –í–æ–∑–¥—É—Ö –≤ –ø–æ–º–µ—â–µ–Ω–∏–∏"
        cards:
          - type: tile
            entity: sensor.mt15_mt29_carbon_dioxide
            name: "CO2"
            icon: mdi:molecule-co2
          - type: tile
            entity: sensor.mt15_mt29_pm2_5
            name: "PM2.5"
            icon: mdi:blur
          - type: tile
            entity: sensor.mt15_mt29_pm10
            name: "PM10"
            icon: mdi:blur-radial
          - type: tile
            entity: sensor.mt15_mt29_voc
            name: "VOC"
            icon: mdi:cloud-outline
          - type: tile
            entity: sensor.mt15_mt29_formaldehyde
            name: "–§–æ—Ä–º–∞–ª—å–¥–µ–≥–∏–¥"
            icon: mdi:flask

  # ==============================================================================
  # VIEW 3: –°–¢–ê–í–ù–ò
  # ==============================================================================
  - title: –°—Ç–∞–≤–Ω–∏
    path: shutters
    icon: mdi:window-shutter
    type: sections
    max_columns: 2
    sections:
      # --------------------------------------------------------------------------
      # –°–¢–ê–í–ù–ò 1
      # --------------------------------------------------------------------------
      - type: grid
        title: "ü™ü –°—Ç–∞–≤–Ω–∏ 1"
        cards:
          - type: tile
            entity: cover.stavni_1
            name: "–°—Ç–∞–≤–Ω–∏ 1"
            features:
              - type: cover-open-close
              - type: cover-position
          - type: horizontal-stack
            cards:
              - type: button
                name: "‚ñ≤"
                icon: mdi:chevron-up
                show_name: true
                show_icon: true
                hold_action:
                  action: perform-action
                  perform_action: script.turn_on
                  target:
                    entity_id: script.stavni_1_hold_open
                tap_action:
                  action: perform-action
                  perform_action: script.turn_on
                  target:
                    entity_id: script.stavni_1_stop
              - type: button
                name: "‚ñ†"
                icon: mdi:stop
                show_name: true
                show_icon: true
                tap_action:
                  action: perform-action
                  perform_action: script.turn_on
                  target:
                    entity_id: script.stavni_1_stop
              - type: button
                name: "‚ñº"
                icon: mdi:chevron-down
                show_name: true
                show_icon: true
                hold_action:
                  action: perform-action
                  perform_action: script.turn_on
                  target:
                    entity_id: script.stavni_1_hold_close
                tap_action:
                  action: perform-action
                  perform_action: script.turn_on
                  target:
                    entity_id: script.stavni_1_stop
          - type: horizontal-stack
            cards:
              - type: button
                name: "–û—Ç–∫—Ä—ã—Ç—å"
                icon: mdi:window-shutter-open
                tap_action:
                  action: perform-action
                  perform_action: script.turn_on
                  target:
                    entity_id: script.stavni_1_open_full
              - type: button
                name: "–ó–∞–∫—Ä—ã—Ç—å"
                icon: mdi:window-shutter
                tap_action:
                  action: perform-action
                  perform_action: script.turn_on
                  target:
                    entity_id: script.stavni_1_close_full

      # --------------------------------------------------------------------------
      # –°–¢–ê–í–ù–ò 2
      # --------------------------------------------------------------------------
      - type: grid
        title: "ü™ü –°—Ç–∞–≤–Ω–∏ 2"
        cards:
          - type: tile
            entity: cover.stavni_2
            name: "–°—Ç–∞–≤–Ω–∏ 2"
            features:
              - type: cover-open-close
              - type: cover-position
          - type: horizontal-stack
            cards:
              - type: button
                name: "‚ñ≤"
                icon: mdi:chevron-up
                show_name: true
                show_icon: true
                hold_action:
                  action: perform-action
                  perform_action: script.turn_on
                  target:
                    entity_id: script.stavni_2_hold_open
                tap_action:
                  action: perform-action
                  perform_action: script.turn_on
                  target:
                    entity_id: script.stavni_2_stop
              - type: button
                name: "‚ñ†"
                icon: mdi:stop
                show_name: true
                show_icon: true
                tap_action:
                  action: perform-action
                  perform_action: script.turn_on
                  target:
                    entity_id: script.stavni_2_stop
              - type: button
                name: "‚ñº"
                icon: mdi:chevron-down
                show_name: true
                show_icon: true
                hold_action:
                  action: perform-action
                  perform_action: script.turn_on
                  target:
                    entity_id: script.stavni_2_hold_close
                tap_action:
                  action: perform-action
                  perform_action: script.turn_on
                  target:
                    entity_id: script.stavni_2_stop
          - type: horizontal-stack
            cards:
              - type: button
                name: "–û—Ç–∫—Ä—ã—Ç—å"
                icon: mdi:window-shutter-open
                tap_action:
                  action: perform-action
                  perform_action: script.turn_on
                  target:
                    entity_id: script.stavni_2_open_full
              - type: button
                name: "–ó–∞–∫—Ä—ã—Ç—å"
                icon: mdi:window-shutter
                tap_action:
                  action: perform-action
                  perform_action: script.turn_on
                  target:
                    entity_id: script.stavni_2_close_full

      # --------------------------------------------------------------------------
      # –í–°–ï –°–¢–ê–í–ù–ò
      # --------------------------------------------------------------------------
      - type: grid
        title: "üè† –í—Å–µ —Å—Ç–∞–≤–Ω–∏"
        cards:
          - type: horizontal-stack
            cards:
              - type: button
                name: "–í—Å–µ –æ—Ç–∫—Ä—ã—Ç—å"
                icon: mdi:window-shutter-open
                tap_action:
                  action: perform-action
                  perform_action: script.turn_on
                  target:
                    entity_id: script.all_shutters_open
              - type: button
                name: "–í—Å–µ —Å—Ç–æ–ø"
                icon: mdi:stop-circle
                tap_action:
                  action: perform-action
                  perform_action: script.turn_on
                  target:
                    entity_id: script.all_shutters_stop
              - type: button
                name: "–í—Å–µ –∑–∞–∫—Ä—ã—Ç—å"
                icon: mdi:window-shutter
                tap_action:
                  action: perform-action
                  perform_action: script.turn_on
                  target:
                    entity_id: script.all_shutters_close

  # ==============================================================================
  # VIEW 4: SCENES - –°—Ü–µ–Ω—ã
  # ==============================================================================
  - title: Scenes
    path: scenes
    icon: mdi:palette
    type: sections
    max_columns: 3
    sections:
      # --------------------------------------------------------------------------
      # –†–ï–ñ–ò–ú–´ –û–°–í–ï–©–ï–ù–ò–Ø
      # --------------------------------------------------------------------------
      - type: grid
        title: "üí° –†–µ–∂–∏–º—ã –æ—Å–≤–µ—â–µ–Ω–∏—è"
        cards:
          - type: button
            entity: scene.work
            name: "–†–∞–±–æ—Ç–∞"
            icon: mdi:desk-lamp
            tap_action:
              action: perform-action
              perform_action: scene.turn_on
              target:
                entity_id: scene.work
          - type: button
            entity: scene.relax
            name: "–û—Ç–¥—ã—Ö"
            icon: mdi:sofa
            tap_action:
              action: perform-action
              perform_action: scene.turn_on
              target:
                entity_id: scene.relax
          - type: button
            entity: scene.cinema
            name: "–ö–∏–Ω–æ"
            icon: mdi:movie
            tap_action:
              action: perform-action
              perform_action: scene.turn_on
              target:
                entity_id: scene.cinema
          - type: button
            entity: scene.sleep
            name: "–°–æ–Ω"
            icon: mdi:sleep
            tap_action:
              action: perform-action
              perform_action: scene.turn_on
              target:
                entity_id: scene.sleep
          - type: button
            entity: scene.night
            name: "–ù–æ—á—å"
            icon: mdi:weather-night
            tap_action:
              action: perform-action
              perform_action: scene.turn_on
              target:
                entity_id: scene.night
          - type: button
            entity: scene.morning
            name: "–£—Ç—Ä–æ"
            icon: mdi:weather-sunset-up
            tap_action:
              action: perform-action
              perform_action: scene.turn_on
              target:
                entity_id: scene.morning
          - type: button
            entity: scene.evening
            name: "–í–µ—á–µ—Ä"
            icon: mdi:weather-sunset
            tap_action:
              action: perform-action
              perform_action: scene.turn_on
              target:
                entity_id: scene.evening

      # --------------------------------------------------------------------------
      # –†–ï–ñ–ò–ú–´ –î–û–ú–ê
      # --------------------------------------------------------------------------
      - type: grid
        title: "üè† –†–µ–∂–∏–º—ã –¥–æ–º–∞"
        cards:
          - type: button
            name: "–°–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏"
            icon: mdi:bed
            tap_action:
              action: perform-action
              perform_action: script.turn_on
              target:
                entity_id: script.goodnight
          - type: button
            name: "–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ"
            icon: mdi:white-balance-sunny
            tap_action:
              action: perform-action
              perform_action: script.turn_on
              target:
                entity_id: script.good_morning
          - type: button
            name: "–£—Ö–æ–∂—É"
            icon: mdi:door-open
            tap_action:
              action: perform-action
              perform_action: script.turn_on
              target:
                entity_id: script.leaving_home

      # --------------------------------------------------------------------------
      # –ë–´–°–¢–†–´–ï –î–ï–ô–°–¢–í–ò–Ø
      # --------------------------------------------------------------------------
      - type: grid
        title: "‚ö° –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è"
        cards:
          - type: button
            name: "–í—Å—ë –≤—ã–∫–ª—é—á–∏—Ç—å"
            icon: mdi:power-off
            tap_action:
              action: perform-action
              perform_action: light.turn_off
              target:
                entity_id: all
          - type: button
            name: "–ó–∞–∫—Ä—ã—Ç—å —Å—Ç–∞–≤–Ω–∏"
            icon: mdi:window-shutter
            tap_action:
              action: perform-action
              perform_action: script.turn_on
              target:
                entity_id: script.close_all_shutters
          - type: button
            name: "–û—Ç–∫—Ä—ã—Ç—å —Å—Ç–∞–≤–Ω–∏"
            icon: mdi:window-shutter-open
            tap_action:
              action: perform-action
              perform_action: script.turn_on
              target:
                entity_id: script.open_all_shutters

  # ==============================================================================
  # VIEW 5: SYSTEM - –°–∏—Å—Ç–µ–º–∞
  # ==============================================================================
  - title: System
    path: system
    icon: mdi:cog
    type: sections
    max_columns: 2
    sections:
      # --------------------------------------------------------------------------
      # –°–ò–°–¢–ï–ú–ù–ê–Ø –£–°–¢–û–ô–ß–ò–í–û–°–¢–¨
      # --------------------------------------------------------------------------
      - type: grid
        title: "üõ°Ô∏è –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã"
        cards:
          - type: tile
            entity: binary_sensor.all_systems_operational
            name: "–í—Å–µ —Å–∏—Å—Ç–µ–º—ã"
            color: green
          - type: tile
            entity: sensor.data_quality_score
            name: "–ö–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö"
            color: >
              {% set score = states('sensor.data_quality_score') | int(100) %}
              {% if score >= 90 %}green
              {% elif score >= 70 %}light-green
              {% elif score >= 50 %}orange
              {% else %}red{% endif %}
          - type: tile
            entity: sensor.automation_health
            name: "–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏"
          - type: tile
            entity: binary_sensor.system_degraded
            name: "–î–µ–≥—Ä–∞–¥–∞—Ü–∏—è"
            color: red
          - type: tile
            entity: sensor.system_operating_mode
            name: "–†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã"
          - type: markdown
            content: |
              ### {{ state_attr('binary_sensor.all_systems_operational', 'status_ru') }}

              | –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
              |---------|----------|
              | **–ö–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö** | {{ states('sensor.data_quality_score') }}% ({{ state_attr('sensor.data_quality_score', 'level_ru') }}) |
              | **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏** | {{ state_attr('sensor.automation_health', 'state_ru') }} |
              | **–†–µ–∂–∏–º** | {{ state_attr('sensor.system_operating_mode', 'state_ru') }} |
              | **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** | {{ state_attr('sensor.security_surface', 'state_ru') }} |

              {% if state_attr('sensor.data_quality_score', 'unavailable_count') | int(0) > 0 %}
              ‚ö†Ô∏è **–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ:** {{ state_attr('sensor.data_quality_score', 'unavailable_count') }} —Å–µ–Ω—Å–æ—Ä–æ–≤
              {% endif %}

      # --------------------------------------------------------------------------
      # HOME ASSISTANT
      # --------------------------------------------------------------------------
      - type: grid
        title: "üè† Home Assistant"
        cards:
          - type: tile
            entity: sensor.processor_use_percent
            name: "CPU"
            icon: mdi:cpu-64-bit
          - type: tile
            entity: sensor.memory_use_percent
            name: "RAM"
            icon: mdi:memory
          - type: tile
            entity: sensor.disk_use_percent
            name: "–î–∏—Å–∫"
            icon: mdi:harddisk
          - type: tile
            entity: sensor.last_boot
            name: "Uptime"
            icon: mdi:clock-outline
          - type: tile
            entity: update.home_assistant_core_update
            name: "HA Update"
            icon: mdi:update

      # --------------------------------------------------------------------------
      # ADGUARD
      # --------------------------------------------------------------------------
      - type: grid
        title: "üõ°Ô∏è AdGuard"
        cards:
          - type: tile
            entity: switch.adguard_protection
            name: "–ó–∞—â–∏—Ç–∞"
          - type: tile
            entity: sensor.adguard_dns_queries
            name: "–ó–∞–ø—Ä–æ—Å—ã"
            icon: mdi:dns
          - type: tile
            entity: sensor.adguard_dns_queries_blocked_ratio
            name: "–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ"
            icon: mdi:shield-check

      # --------------------------------------------------------------------------
      # 3D –ü–†–ò–ù–¢–ï–†
      # --------------------------------------------------------------------------
      - type: grid
        title: "üñ®Ô∏è 3D –ü—Ä–∏–Ω—Ç–µ—Ä"
        cards:
          - type: tile
            entity: sensor.k1c_current_print_state
            name: "–°—Ç–∞—Ç—É—Å"
            icon: mdi:printer-3d
          - type: tile
            entity: sensor.k1c_progress
            name: "–ü—Ä–æ–≥—Ä–µ—Å—Å"
            icon: mdi:percent
          - type: tile
            entity: sensor.k1c_nozzle_temperature
            name: "–°–æ–ø–ª–æ"
            icon: mdi:thermometer-high
          - type: tile
            entity: sensor.k1c_bed_temperature
            name: "–°—Ç–æ–ª"
            icon: mdi:thermometer

      # --------------------------------------------------------------------------
      # –°–ï–¢–¨
      # --------------------------------------------------------------------------
      - type: grid
        title: "üåê –°–µ—Ç—å"
        cards:
          - type: tile
            entity: binary_sensor.internet_connection
            name: "–ò–Ω—Ç–µ—Ä–Ω–µ—Ç"
            icon: mdi:web
          - type: tile
            entity: sensor.speedtest_download
            name: "Download"
            icon: mdi:download
          - type: tile
            entity: sensor.speedtest_upload
            name: "Upload"
            icon: mdi:upload

      # --------------------------------------------------------------------------
      # –°–ò–°–¢–ï–ú–ù–´–ï –î–ï–ô–°–¢–í–ò–Ø
      # --------------------------------------------------------------------------
      - type: grid
        title: "‚öôÔ∏è –î–µ–π—Å—Ç–≤–∏—è"
        cards:
          - type: button
            name: "–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å HA"
            icon: mdi:restart
            tap_action:
              action: perform-action
              perform_action: homeassistant.restart
            confirmation:
              text: "–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å Home Assistant?"
          - type: button
            name: "–¢–µ—Å—Ç Browser Mod"
            icon: mdi:test-tube
            tap_action:
              action: perform-action
              perform_action: script.turn_on
              target:
                entity_id: script.test_browser_mod

      # --------------------------------------------------------------------------
      # –ü–ï–†–ï–ó–ê–ì–†–£–ó–ö–ê YAML
      # --------------------------------------------------------------------------
      - type: grid
        title: "üîÑ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ YAML"
        cards:
          - type: button
            name: "Reload All"
            icon: mdi:reload
            tap_action:
              action: perform-action
              perform_action: homeassistant.reload_all
          - type: button
            name: "Automations"
            icon: mdi:robot
            tap_action:
              action: perform-action
              perform_action: automation.reload
          - type: button
            name: "Scripts"
            icon: mdi:script-text
            tap_action:
              action: perform-action
              perform_action: script.reload
          - type: button
            name: "Scenes"
            icon: mdi:palette
            tap_action:
              action: perform-action
              perform_action: scene.reload
          - type: button
            name: "Templates"
            icon: mdi:code-braces
            tap_action:
              action: perform-action
              perform_action: template.reload
          - type: button
            name: "Groups"
            icon: mdi:group
            tap_action:
              action: perform-action
              perform_action: group.reload
          - type: button
            name: "Core Config"
            icon: mdi:cog
            tap_action:
              action: perform-action
              perform_action: homeassistant.reload_core_config
          - type: button
            name: "Input Bool"
            icon: mdi:toggle-switch
            tap_action:
              action: perform-action
              perform_action: input_boolean.reload
          - type: button
            name: "Input Number"
            icon: mdi:numeric
            tap_action:
              action: perform-action
              perform_action: input_number.reload
          - type: button
            name: "Input Select"
            icon: mdi:form-dropdown
            tap_action:
              action: perform-action
              perform_action: input_select.reload
          - type: button
            name: "Input Text"
            icon: mdi:form-textbox
            tap_action:
              action: perform-action
              perform_action: input_text.reload
          - type: button
            name: "Utility Meter"
            icon: mdi:counter
            tap_action:
              action: perform-action
              perform_action: utility_meter.reload

      # --------------------------------------------------------------------------
      # –õ–û–ì–ò –ò –û–¢–õ–ê–î–ö–ê
      # --------------------------------------------------------------------------
      - type: grid
        title: "üìã –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞"
        cards:
          - type: button
            name: "System Log"
            icon: mdi:file-document
            tap_action:
              action: url
              url_path: /config/logs
          - type: button
            name: "YAML Tools"
            icon: mdi:hammer-wrench
            tap_action:
              action: url
              url_path: /developer-tools/yaml
          - type: button
            name: "States"
            icon: mdi:state-machine
            tap_action:
              action: url
              url_path: /developer-tools/state
          - type: button
            name: "Services"
            icon: mdi:room-service
            tap_action:
              action: url
              url_path: /developer-tools/service
          - type: button
            name: "Events"
            icon: mdi:calendar-star
            tap_action:
              action: url
              url_path: /developer-tools/event
          - type: button
            name: "Template"
            icon: mdi:code-braces-box
            tap_action:
              action: url
              url_path: /developer-tools/template

  # ==============================================================================
  # VIEW 6: CRYPTO - –ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
  # ==============================================================================
  - title: Crypto
    path: crypto
    icon: mdi:bitcoin
    type: sections
    max_columns: 3
    sections:
      # ==========================================================================
      # ROW 0: –í–´–ë–û–† –ú–û–ù–ï–¢–´
      # ==========================================================================
      - type: grid
        title: "üéØ –í—ã–±–æ—Ä –º–æ–Ω–µ—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞"
        cards:
          - type: entities
            entities:
              - entity: input_select.crypto_currency
                name: "–í–∞–ª—é—Ç–∞"
              - entity: input_select.crypto_main_coin
                name: "–û—Å–Ω–æ–≤–Ω–∞—è –º–æ–Ω–µ—Ç–∞"
              - entity: input_select.crypto_compare_coin
                name: "–î–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è"
          - type: tile
            entity: sensor.crypto_selected_price
            name: "–í—ã–±—Ä–∞–Ω–Ω–∞—è –º–æ–Ω–µ—Ç–∞"
            icon: mdi:bitcoin
          - type: markdown
            content: |
              {% set curr = states('input_select.crypto_currency') | default('EUR') %}
              {% set sym = '‚Ç¨' if curr == 'EUR' else '$' %}
              ### üìä {{ states('input_select.crypto_main_coin') }} –ê–Ω–∞–ª–∏–∑
              | –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
              |---------|----------|
              | **–¶–µ–Ω–∞ {{ curr }}** | {{ sym }}{{ states('sensor.crypto_selected_price') | default(0) }} |
              | **–¶–µ–Ω–∞ {{ 'USD' if curr == 'EUR' else 'EUR' }}** | {{ '$' if curr == 'EUR' else '‚Ç¨' }}{{ state_attr('sensor.crypto_selected_price', 'usd' if curr == 'EUR' else 'eur') | default(0) }} |
              | **24h** | {{ state_attr('sensor.crypto_selected_price', 'change_24h') | default(0) }}% |
              | **RSI** | {{ states('sensor.crypto_selected_rsi') | default(50) }} {{ state_attr('sensor.crypto_selected_rsi', 'status') | default('') }} |
              | **MTF Score** | {{ states('sensor.crypto_selected_mtf') | default(50) }}% |
              | **MTF Signal** | {{ state_attr('sensor.crypto_selected_mtf', 'signal') | default('N/A') }} |
          - type: markdown
            content: |
              {% set curr = states('input_select.crypto_currency') | default('EUR') %}
              {% set sym = '‚Ç¨' if curr == 'EUR' else '$' %}
              ### ‚öñÔ∏è –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: {{ states('input_select.crypto_main_coin') }} vs {{ states('input_select.crypto_compare_coin') }}
              {% if states('input_select.crypto_compare_coin') != '–ù–µ—Ç' %}
              | –ú–æ–Ω–µ—Ç–∞ | –¶–µ–Ω–∞ {{ curr }} | 24h |
              |--------|----------|-----|
              | **{{ states('input_select.crypto_main_coin') }}** | {{ sym }}{{ states('sensor.crypto_selected_price') }} | {{ state_attr('sensor.crypto_selected_price', 'change_24h') }}% |
              | **{{ states('input_select.crypto_compare_coin') }}** | {{ sym }}{{ states('sensor.crypto_compare_price') }} | {{ state_attr('sensor.crypto_compare_price', 'change_24h') }}% |
              {% else %}
              –í—ã–±–µ—Ä–∏—Ç–µ –º–æ–Ω–µ—Ç—É –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
              {% endif %}

      # ==========================================================================
      # ROW 1: –°–¢–ê–¢–£–° –ò–ù–í–ï–°–¢–û–†–ê (–Ω–æ–≤—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã)
      # ==========================================================================
      - type: grid
        title: "üßò –°—Ç–∞—Ç—É—Å –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞"
        cards:
          - type: tile
            entity: sensor.crypto_do_nothing_ok
            name: "–î–µ–π—Å—Ç–≤–∏–µ"
            icon: mdi:meditation
            color: >
              {% set state = states('sensor.crypto_do_nothing_ok') %}
              {% if 'üü¢' in state %}green
              {% elif 'üü°' in state %}amber
              {% else %}red{% endif %}
          - type: tile
            entity: sensor.crypto_investor_phase
            name: "–§–∞–∑–∞ —Ä—ã–Ω–∫–∞"
            icon: mdi:chart-timeline-variant-shimmer
            color: >
              {% set state = states('sensor.crypto_investor_phase') %}
              {% if 'Accumulation' in state %}green
              {% elif 'Growth' in state %}light-green
              {% elif 'Euphoria' in state %}red
              {% else %}grey{% endif %}
          - type: tile
            entity: sensor.crypto_calm_indicator
            name: "–°–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ"
            icon: mdi:emoticon-cool
          - type: tile
            entity: sensor.crypto_next_action_timer
            name: "–°–ª–µ–¥. DCA"
            icon: mdi:timer-outline
          - type: markdown
            content: |
              ### {{ states('sensor.crypto_do_nothing_ok') }}
              {{ state_attr('sensor.crypto_do_nothing_ok', 'reason') | default('–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö') }}

              ---
              **–§–∞–∑–∞:** {{ states('sensor.crypto_investor_phase') }}

              {{ state_attr('sensor.crypto_investor_phase', 'description') | default('') }}

              ---
              **{{ state_attr('sensor.crypto_calm_indicator', 'message') | default('') }}**

      # ==========================================================================
      # ROW 1b: –ö–†–ê–°–ù–´–ï –§–õ–ê–ì–ò –ò –ù–ê–ü–†–Ø–ñ–Å–ù–ù–û–°–¢–¨
      # ==========================================================================
      - type: grid
        title: "‚ö†Ô∏è –†–∏—Å–∫–∏ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç"
        cards:
          - type: tile
            entity: sensor.crypto_red_flags
            name: "–§–ª–∞–≥–∏"
            icon: mdi:flag-variant
            color: >
              {% set count = state_attr('sensor.crypto_red_flags', 'flags_count') | default(0) | int %}
              {% if count == 0 %}green
              {% elif count <= 2 %}amber
              {% else %}red{% endif %}
          - type: tile
            entity: sensor.crypto_market_tension
            name: "–ù–∞–ø—Ä—è–∂—ë–Ω–Ω–æ—Å—Ç—å"
            icon: mdi:gauge
            color: >
              {% set state = states('sensor.crypto_market_tension') %}
              {% if 'üü¢' in state %}green
              {% elif 'üü°' in state %}amber
              {% else %}red{% endif %}
          - type: tile
            entity: sensor.crypto_price_context
            name: "–ö–æ–Ω—Ç–µ–∫—Å—Ç —Ü–µ–Ω—ã"
            icon: mdi:chart-box
          - type: markdown
            content: |
              ### üö© –ö—Ä–∞—Å–Ω—ã–µ —Ñ–ª–∞–≥–∏
              {{ state_attr('sensor.crypto_red_flags', 'flags_list') | default('–ü—Ä–æ–≤–µ—Ä–∫–∞...') }}

              ---
              ### üìä –ö–æ–Ω—Ç–µ–∫—Å—Ç —Ü–µ–Ω—ã BTC
              **{{ states('sensor.crypto_price_context') }}**

              –¢–µ–∫—É—â–∞—è: ${{ state_attr('sensor.crypto_price_context', 'current_price') | default('N/A') }}
              –°—Ä–µ–¥–Ω–µ–µ 6–º: ${{ state_attr('sensor.crypto_price_context', 'avg_6m') | default('N/A') }}
              –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ: {{ state_attr('sensor.crypto_price_context', 'diff_percent') | default(0) }}%

              *{{ state_attr('sensor.crypto_price_context', 'recommendation') | default('') }}*

      # ==========================================================================
      # ROW 1c: –ü–û–†–¢–§–ï–õ–¨ (–∏–∑ Bybit)
      # ==========================================================================
      - type: grid
        title: "üíº –ü–æ—Ä—Ç—Ñ–µ–ª—å Bybit"
        cards:
          - type: markdown
            content: |
              {% set raw = state_attr('sensor.crypto_bybit_balance_raw', 'total_usd') | float(0) %}
              {% set balances = state_attr('sensor.crypto_bybit_balance_raw', 'balances') %}
              {% set status = states('sensor.crypto_bybit_balance_raw') %}

              ### üí∞ –í—Å–µ–≥–æ: ${{ raw | int }}

              {% if status == 'ok' and balances %}
              **–ü–æ–∑–∏—Ü–∏–∏:**
              {% for coin, data in balances.items() %}
              {% set usd_val = data.usd | default(0) | float %}
              {% if usd_val > 1 %}
              - **{{ coin }}**: {{ (data.qty | default(0) | float) | round(4) }} (${{ usd_val | int }})
              {% endif %}
              {% endfor %}
              {% elif status == 'ok' %}
              ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–æ, –ø—É—Å—Ç–æ
              {% else %}
              ‚è≥ –°—Ç–∞—Ç—É—Å: {{ status | default('–∑–∞–≥—Ä—É–∑–∫–∞') }}
              {% endif %}
          - type: button
            name: "üîÑ –û–±–Ω–æ–≤–∏—Ç—å"
            icon: mdi:refresh
            tap_action:
              action: perform-action
              perform_action: homeassistant.update_entity
              target:
                entity_id: sensor.crypto_bybit_balance_raw

      # ==========================================================================
      # ROW 1d: DCA –†–ï–ó–£–õ–¨–¢–ê–¢
      # ==========================================================================
      - type: grid
        title: "üíµ DCA –Ω–∞ —ç—Ç—É –Ω–µ–¥–µ–ª—é"
        cards:
          - type: tile
            entity: sensor.crypto_dca_result
            name: "–°—É–º–º–∞ DCA"
            icon: mdi:cash-check
          - type: tile
            entity: sensor.crypto_dca
            name: "–°–∏–≥–Ω–∞–ª"
            icon: mdi:cash-plus
            color: >
              {% set state = states('sensor.crypto_dca') %}
              {% if 'üü¢' in state %}green
              {% elif 'üü°' in state %}amber
              {% else %}red{% endif %}
          - type: markdown
            content: |
              ### üí∞ –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ DCA
              | –ê–∫—Ç–∏–≤ | –°—É–º–º–∞ |
              |-------|------:|
              | **BTC** | ‚Ç¨{{ state_attr('sensor.crypto_dca_result', 'btc_amount') | default(0) }} |
              | **ETH** | ‚Ç¨{{ state_attr('sensor.crypto_dca_result', 'eth_amount') | default(0) }} |
              | **Alts** | ‚Ç¨{{ state_attr('sensor.crypto_dca_result', 'alts_amount') | default(0) }} |
              | **–ò—Ç–æ–≥–æ** | **‚Ç¨{{ states('sensor.crypto_dca_result') | default(0) }}** |

              {{ state_attr('sensor.crypto_dca_result', 'reason') | default('') }}

              üìÖ {{ states('sensor.crypto_next_action_timer') }}

      # ==========================================================================
      # ROW 1e: –ï–ñ–ï–ù–ï–î–ï–õ–¨–ù–´–ô –ò–ù–°–ê–ô–¢
      # ==========================================================================
      - type: grid
        title: "üì∞ –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —Ä—ã–Ω–∫–µ"
        cards:
          - type: markdown
            content: |
              ### {{ states('sensor.crypto_weekly_insight') }}

              | –ê–∫—Ç–∏–≤ | –°—Ç–∞—Ç—É—Å |
              |-------|--------|
              | **BTC** | {{ state_attr('sensor.crypto_weekly_insight', 'btc_status') | default('N/A') }} |
              | **ETH vs BTC** | {{ state_attr('sensor.crypto_weekly_insight', 'eth_vs_btc') | default('N/A') }} |
              | **–ê–ª—å—Ç–∫–æ–∏–Ω—ã** | {{ state_attr('sensor.crypto_weekly_insight', 'alts_status') | default('N/A') }} |
              | **AI —Å–µ–∫—Ç–æ—Ä** | {{ state_attr('sensor.crypto_weekly_insight', 'ai_sector') | default('N/A') }} |
              | **–î–æ–º–∏–Ω–∞—Ü–∏—è** | {{ state_attr('sensor.crypto_weekly_insight', 'dominance_trend') | default('N/A') }} |

              ---
              **–°–≤–æ–¥–∫–∞:** {{ state_attr('sensor.crypto_weekly_insight', 'summary') | default('–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö') }}

      # ==========================================================================
      # ROW 2: –û–ë–ó–û–† –†–´–ù–ö–ê
      # ==========================================================================
      - type: grid
        title: "üìä –û–±–∑–æ—Ä —Ä—ã–Ω–∫–∞"
        cards:
          - type: tile
            entity: sensor.crypto_fear_greed_index
            name: "Fear & Greed"
            icon: mdi:emoticon-neutral
            color: >
              {% set val = states('sensor.crypto_fear_greed_index') | int(50) %}
              {% if val <= 25 %}red
              {% elif val <= 45 %}orange
              {% elif val <= 55 %}grey
              {% elif val <= 75 %}light-green
              {% else %}green{% endif %}
          - type: tile
            entity: sensor.crypto_market_extended
            name: "Extended Score"
            icon: mdi:star-four-points
            color: >
              {% set val = states('sensor.crypto_market_extended') | int(50) %}
              {% if val >= 70 %}green
              {% elif val >= 55 %}light-green
              {% elif val >= 45 %}grey
              {% elif val >= 30 %}orange
              {% else %}red{% endif %}
          - type: tile
            entity: sensor.crypto_btc_dominance
            name: "BTC –î–æ–º–∏–Ω–∞—Ü–∏—è"
            icon: mdi:crown
          - type: tile
            entity: sensor.crypto_total_market_cap
            name: "Market Cap"
            icon: mdi:chart-bar
          - type: markdown
            content: |
              ### üìà –°–≤–æ–¥–∫–∞ —Ä—ã–Ω–∫–∞
              | –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
              |---------|----------|
              | **F&G Index** | {{ states('sensor.crypto_fear_greed_index') | default(50) }}/100 |
              | **Extended Score** | {{ states('sensor.crypto_market_extended') | default(50) }}/100 |
              | **BTC –î–æ–º–∏–Ω–∞—Ü–∏—è** | {{ states('sensor.crypto_btc_dominance') | default('N/A') }}% |
              | **Market Cap** | {{ states('sensor.crypto_total_market_cap') | default('N/A') }} |
              | **–°–∏–≥–Ω–∞–ª** | {{ state_attr('sensor.crypto_market_extended', 'overall_signal') | default('‚ö™ N/A') }} |

      # ==========================================================================
      # ROW 3: –¶–ï–ù–´ –ö–†–ò–ü–¢–û–í–ê–õ–Æ–¢
      # ==========================================================================
      - type: grid
        title: "üí∞ –¶–µ–Ω—ã –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç"
        cards:
          - type: markdown
            content: |
              {% set curr = states('input_select.crypto_currency') | default('EUR') %}
              {% set sym = '‚Ç¨' if curr == 'EUR' else '$' %}
              {% set c = curr | lower %}
              ### üíµ –¢–æ–ø –º–æ–Ω–µ—Ç—ã ({{ curr }})
              | –ú–æ–Ω–µ—Ç–∞ | –¶–µ–Ω–∞ | 24h |
              |--------|-----:|----:|
              | **‚Çø BTC** | {{ sym }}{{ state_attr('sensor.crypto_prices_raw', 'bitcoin')[c] | default(0) | round(0) }} | {{ state_attr('sensor.crypto_prices_raw', 'bitcoin')[c ~ '_24h_change'] | default(0) | round(1) }}% |
              | **Œû ETH** | {{ sym }}{{ state_attr('sensor.crypto_prices_raw', 'ethereum')[c] | default(0) | round(0) }} | {{ state_attr('sensor.crypto_prices_raw', 'ethereum')[c ~ '_24h_change'] | default(0) | round(1) }}% |
              | **‚óé SOL** | {{ sym }}{{ state_attr('sensor.crypto_prices_raw', 'solana')[c] | default(0) | round(2) }} | {{ state_attr('sensor.crypto_prices_raw', 'solana')[c ~ '_24h_change'] | default(0) | round(1) }}% |
              | **üíé TON** | {{ sym }}{{ state_attr('sensor.crypto_prices_raw', 'the-open-network')[c] | default(0) | round(2) }} | {{ state_attr('sensor.crypto_prices_raw', 'the-open-network')[c ~ '_24h_change'] | default(0) | round(1) }}% |
              | **üóÑÔ∏è AR** | {{ sym }}{{ state_attr('sensor.crypto_prices_raw', 'arweave')[c] | default(0) | round(2) }} | {{ state_attr('sensor.crypto_prices_raw', 'arweave')[c ~ '_24h_change'] | default(0) | round(1) }}% |
          - type: markdown
            content: |
              {% set curr = states('input_select.crypto_currency') | default('EUR') %}
              {% set sym = '‚Ç¨' if curr == 'EUR' else '$' %}
              {% set c = curr | lower %}
              ### ü§ñ AI —Ç–æ–∫–µ–Ω—ã ({{ curr }})
              | –ú–æ–Ω–µ—Ç–∞ | –¶–µ–Ω–∞ | 24h |
              |--------|-----:|----:|
              | **RNDR** | {{ sym }}{{ state_attr('sensor.crypto_prices_raw', 'render-token')[c] | default(0) | round(2) }} | {{ state_attr('sensor.crypto_prices_raw', 'render-token')[c ~ '_24h_change'] | default(0) | round(1) }}% |
              | **FET** | {{ sym }}{{ state_attr('sensor.crypto_prices_raw', 'fetch-ai')[c] | default(0) | round(3) }} | {{ state_attr('sensor.crypto_prices_raw', 'fetch-ai')[c ~ '_24h_change'] | default(0) | round(1) }}% |
              | **TAO** | {{ sym }}{{ state_attr('sensor.crypto_prices_raw', 'bittensor')[c] | default(0) | round(0) }} | {{ state_attr('sensor.crypto_prices_raw', 'bittensor')[c ~ '_24h_change'] | default(0) | round(1) }}% |
              | **AGIX** | {{ sym }}{{ state_attr('sensor.crypto_prices_raw', 'singularitynet')[c] | default(0) | round(3) }} | {{ state_attr('sensor.crypto_prices_raw', 'singularitynet')[c ~ '_24h_change'] | default(0) | round(1) }}% |
              | **OCEAN** | {{ sym }}{{ state_attr('sensor.crypto_prices_raw', 'ocean-protocol')[c] | default(0) | round(3) }} | {{ state_attr('sensor.crypto_prices_raw', 'ocean-protocol')[c ~ '_24h_change'] | default(0) | round(1) }}% |
              | **AKT** | {{ sym }}{{ state_attr('sensor.crypto_prices_raw', 'akash-network')[c] | default(0) | round(2) }} | {{ state_attr('sensor.crypto_prices_raw', 'akash-network')[c ~ '_24h_change'] | default(0) | round(1) }}% |
          - type: tile
            entity: sensor.eth_gas_price
            name: "ETH Gas"
            icon: mdi:gas-station
            color: >
              {% set gas = states('sensor.eth_gas_price') | int(30) %}
              {% if gas > 100 %}red
              {% elif gas > 50 %}orange
              {% elif gas > 30 %}grey
              {% else %}green{% endif %}

      # ==========================================================================
      # ROW 3: –î–ï–†–ò–í–ê–¢–ò–í–´ (Binance Futures)
      # ==========================================================================
      - type: grid
        title: "üìä –î–µ—Ä–∏–≤–∞—Ç–∏–≤—ã (Binance)"
        cards:
          - type: tile
            entity: sensor.crypto_derivatives
            name: "–î–µ—Ä–∏–≤–∞—Ç–∏–≤—ã"
            icon: mdi:chart-timeline-variant-shimmer
          - type: tile
            entity: sensor.crypto_btc_open_interest_raw
            name: "BTC OI"
            icon: mdi:bitcoin
          - type: tile
            entity: sensor.crypto_eth_open_interest_raw
            name: "ETH OI"
            icon: mdi:ethereum
          - type: tile
            entity: sensor.crypto_btc_long_short_raw
            name: "Long/Short"
            icon: mdi:scale-balance
            color: >
              {% set ratio = states('sensor.crypto_btc_long_short_raw') | float(1) %}
              {% if ratio > 1.3 %}red
              {% elif ratio < 0.8 %}green
              {% else %}grey{% endif %}
          - type: markdown
            content: |
              ### üìà Funding & Sentiment
              | –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ | –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è |
              |---------|----------|---------------|
              | **Funding Rate** | {{ state_attr('sensor.crypto_derivatives', 'btc_funding') | default('N/A') }}% | {{ state_attr('sensor.crypto_derivatives', 'btc_funding_status') | default('N/A') }} |
              | **BTC OI** | {{ state_attr('sensor.crypto_derivatives', 'btc_oi') | default('N/A') }} BTC | |
              | **ETH OI** | {{ state_attr('sensor.crypto_derivatives', 'eth_oi') | default('N/A') }} ETH | |
              | **Long/Short** | {{ state_attr('sensor.crypto_derivatives', 'btc_long_pct') | default(50) }}% / {{ state_attr('sensor.crypto_derivatives', 'btc_short_pct') | default(50) }}% | |

              **–°–∏–≥–Ω–∞–ª:** {{ state_attr('sensor.crypto_derivatives', 'signal') | default('‚ö™ N/A') }}
          - type: tile
            entity: binary_sensor.crypto_funding_extreme
            name: "Funding Extreme"
            icon: mdi:alert-rhombus
            color: red

      # ==========================================================================
      # ROW 4: –°–ï–¢–¨ BITCOIN
      # ==========================================================================
      - type: grid
        title: "‚õìÔ∏è Bitcoin Network"
        cards:
          - type: tile
            entity: sensor.crypto_btc_network
            name: "Hashrate"
            icon: mdi:server-network
          - type: tile
            entity: sensor.crypto_btc_fees
            name: "BTC Fees"
            icon: mdi:speedometer
            color: >
              {% set fee = states('sensor.crypto_btc_fees') | int(10) %}
              {% if fee > 50 %}red
              {% elif fee > 20 %}orange
              {% elif fee > 10 %}grey
              {% else %}green{% endif %}
          - type: tile
            entity: sensor.crypto_btc_difficulty_raw
            name: "Diff Change"
            icon: mdi:chart-bell-curve
          - type: tile
            entity: binary_sensor.crypto_btc_network_healthy
            name: "Network OK"
            icon: mdi:check-network
            color: green
          - type: markdown
            content: |
              ### ‚õìÔ∏è BTC Network Stats
              | –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
              |---------|----------|
              | **Hashrate** | {{ state_attr('sensor.crypto_btc_network', 'hashrate') | default('N/A') }} |
              | **Difficulty** | {{ state_attr('sensor.crypto_btc_network', 'difficulty') | default('N/A') }} |
              | **–°–ª–µ–¥—É—é—â–∞—è –∫–æ—Ä—Ä.** | {{ state_attr('sensor.crypto_btc_network', 'difficulty_change') | default('N/A') }} |
              | **–ü—Ä–æ–≥—Ä–µ—Å—Å** | {{ state_attr('sensor.crypto_btc_network', 'difficulty_progress') | default('N/A') }} |
              | **–ë–ª–æ–∫–æ–≤ –¥–æ –∫–æ—Ä—Ä.** | {{ state_attr('sensor.crypto_btc_network', 'blocks_to_adjustment') | default('N/A') }} |
              | **TX –∑–∞ 24h** | {{ state_attr('sensor.crypto_btc_network', 'tx_24h') | default('N/A') }} |
              | **Avg Block Time** | {{ state_attr('sensor.crypto_btc_network', 'avg_block_time') | default('N/A') }} |
          - type: markdown
            content: |
              ### üí∏ BTC Fees (sat/vB)
              | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –°—Ç–æ–∏–º–æ—Å—Ç—å |
              |-----------|-----------|
              | **‚ö° Fastest** | {{ state_attr('sensor.crypto_btc_fees', 'fastest') | default('N/A') }} sat/vB |
              | **üöÄ 30 min** | {{ state_attr('sensor.crypto_btc_fees', 'half_hour') | default('N/A') }} sat/vB |
              | **‚è±Ô∏è 1 hour** | {{ state_attr('sensor.crypto_btc_fees', 'hour') | default('N/A') }} sat/vB |
              | **üê¢ Economy** | {{ state_attr('sensor.crypto_btc_fees', 'economy') | default('N/A') }} sat/vB |

              **–°—Ç–∞—Ç—É—Å:** {{ state_attr('sensor.crypto_btc_fees', 'recommendation') | default('N/A') }}

      # ==========================================================================
      # ROW 5: DeFi & Staking
      # ==========================================================================
      - type: grid
        title: "üè¶ DeFi & Staking"
        cards:
          - type: tile
            entity: sensor.crypto_defi
            name: "DeFi TVL"
            icon: mdi:bank
          - type: tile
            entity: sensor.crypto_eth_staking_apy_raw
            name: "ETH Staking APY"
            icon: mdi:percent
            color: green
          - type: markdown
            content: |
              ### üè¶ DeFi –ú–µ—Ç—Ä–∏–∫–∏
              | –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
              |---------|----------|
              | **Total DeFi TVL** | ${{ states('sensor.crypto_defi') | default(0) }}B |
              | **ETH Staking APY** | {{ states('sensor.crypto_eth_staking_apy_raw') | default(0) }}% |
              | **–°—Ç–∞—Ç—É—Å –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏** | {{ state_attr('sensor.crypto_defi', 'status') | default('N/A') }} |

      # ==========================================================================
      # ROW 6: –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ô –ê–ù–ê–õ–ò–ó - –ù–ê–°–¢–†–û–ô–ö–ò
      # ==========================================================================
      - type: grid
        title: "üìä –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ - –ù–∞—Å—Ç—Ä–æ–π–∫–∏"
        cards:
          - type: entities
            entities:
              - entity: input_select.crypto_ta_coin
                name: "–ú–æ–Ω–µ—Ç–∞"
              - entity: input_select.crypto_ta_timeframe
                name: "–¢–∞–π–º—Ñ—Ä–µ–π–º"
          - type: markdown
            content: |
              {% if is_state('input_boolean.crypto_updating', 'on') %}
              ### ‚è≥ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ...
              *–ò–¥—ë—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, –ø–æ–¥–æ–∂–¥–∏—Ç–µ...*
              {% else %}
              ### üïê –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
              **–ü–æ—Å–ª–µ–¥–Ω–µ–µ:** {{ state_attr('sensor.crypto_last_update', 'formatted') | default('–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö') }}

              **–°—Ç–∞—Ç—É—Å:** {{ state_attr('sensor.crypto_last_update', 'status') | default('‚ö™ –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö') }}

              *{{ state_attr('sensor.crypto_last_update', 'ago') | default('') }}*
              {% endif %}
          - type: button
            name: "üîÑ –û–±–Ω–æ–≤–∏—Ç—å"
            icon: mdi:refresh
            tap_action:
              action: perform-action
              perform_action: script.turn_on
              target:
                entity_id: script.crypto_force_update
          - type: button
            name: "üì• Backfill –∞–Ω–∞–ª–∏–∑–∞"
            icon: mdi:database-import
            tap_action:
              action: perform-action
              perform_action: script.turn_on
              target:
                entity_id: script.crypto_backfill_data
            confirmation:
              text: "–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –∞–Ω–∞–ª–∏–∑–∞? –≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç."
          - type: button
            name: "üìä –ò–º–ø–æ—Ä—Ç –∏—Å—Ç–æ—Ä–∏–∏ —Ü–µ–Ω"
            icon: mdi:chart-timeline-variant
            tap_action:
              action: perform-action
              perform_action: script.turn_on
              target:
                entity_id: script.crypto_import_price_history
            confirmation:
              text: "–ó–∞–≥—Ä—É–∑–∏—Ç—å 90-–¥–Ω–µ–≤–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é —Ü–µ–Ω –∏–∑ CoinGecko? –≠—Ç–æ –∑–∞–π–º—ë—Ç ~30 —Å–µ–∫—É–Ω–¥."

      # ==========================================================================
      # ROW 6b: –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ô –ê–ù–ê–õ–ò–ó - –î–ê–ù–ù–´–ï
      # ==========================================================================
      - type: grid
        title: "üìà –¢–µ—Ö. –∞–Ω–∞–ª–∏–∑ (30m —Å–≤–µ—á–∏)"
        cards:
          - type: tile
            entity: sensor.crypto_rsi
            name: "RSI"
            icon: mdi:chart-line-variant
            color: >
              {% set val = states('sensor.crypto_rsi') | int(50) %}
              {% if val >= 70 %}red{% elif val <= 30 %}green{% else %}grey{% endif %}
          - type: tile
            entity: sensor.crypto_mtf_score
            name: "MTF Score"
            icon: mdi:chart-bell-curve-cumulative
            color: >
              {% set val = states('sensor.crypto_mtf_score') | int(50) %}
              {% if val >= 65 %}green{% elif val >= 50 %}light-green{% elif val >= 35 %}orange{% else %}red{% endif %}
          - type: tile
            entity: sensor.crypto_score
            name: "Total Score"
            icon: mdi:star-four-points
          - type: tile
            entity: sensor.crypto_cycle
            name: "–§–∞–∑–∞ —Ü–∏–∫–ª–∞"
            icon: mdi:chart-timeline-variant
          - type: tile
            entity: sensor.crypto_from_ath
            name: "–û—Ç ATH"
            icon: mdi:chart-bell-curve
          - type: tile
            entity: sensor.crypto_patterns
            name: "–ü–∞—Ç—Ç–µ—Ä–Ω—ã"
            icon: mdi:chart-areaspline
          - type: markdown
            content: |
              {% set coin = states('input_select.crypto_ta_coin') | default('BTC') %}
              {% set data = state_attr('sensor.crypto_analysis_raw', 'data') %}
              ### üìä {{ coin }} –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑
              | –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
              |---------|----------|
              | **RSI (30m)** | {{ data['crypto_' ~ coin | lower ~ '_rsi'] | default(50) | round(1) if data else 'N/A' }} |
              | **MTF Score** | {{ data['crypto_' ~ coin | lower ~ '_mtf_score'] | default(50) | round(0) if data else 'N/A' }}% |
              | **–°–∏–≥–Ω–∞–ª** | {{ data['crypto_' ~ coin | lower ~ '_mtf_signal'] | default('N/A') if data else 'N/A' }} |
              | **–¢—Ä–µ–Ω–¥ 30m** | {{ data['crypto_' ~ coin | lower ~ '_30m_trend'] | default('N/A') if data else 'N/A' }} |
              | **–¢—Ä–µ–Ω–¥ 1h** | {{ data['crypto_' ~ coin | lower ~ '_1h_trend'] | default('N/A') if data else 'N/A' }} |
              | **–¢—Ä–µ–Ω–¥ 4h** | {{ data['crypto_' ~ coin | lower ~ '_4h_trend'] | default('N/A') if data else 'N/A' }} |
              | **–û—Ç ATH** | {{ data['crypto_' ~ coin | lower ~ '_from_ath_pct'] | default(0) | round(1) if data else 'N/A' }}% |
          - type: markdown
            content: |
              ### ‚Çø BTC vs Œû ETH
              | –ú–µ—Ç—Ä–∏–∫–∞ | BTC | ETH |
              |---------|:---:|:---:|
              | **RSI** | {{ state_attr('sensor.crypto_rsi', 'btc') | default('N/A') }} | {{ state_attr('sensor.crypto_rsi', 'eth') | default('N/A') }} |
              | **MTF Score** | {{ state_attr('sensor.crypto_mtf_score', 'btc') | default('N/A') }}% | {{ state_attr('sensor.crypto_mtf_score', 'eth') | default('N/A') }}% |
              | **–ü–∞—Ç—Ç–µ—Ä–Ω—ã** | {{ state_attr('sensor.crypto_patterns', 'btc_count') | default(0) }} | {{ state_attr('sensor.crypto_patterns', 'eth_count') | default(0) }} |

              **–§–∞–∑–∞ —Ü–∏–∫–ª–∞ BTC:** {{ states('sensor.crypto_cycle') | default('N/A') }}

      # ==========================================================================
      # ROW 7: DCA –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–†
      # ==========================================================================
      - type: grid
        title: "üíµ DCA –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä"
        cards:
          - type: tile
            entity: sensor.crypto_dca
            name: "–°–∏–≥–Ω–∞–ª DCA"
            icon: mdi:cash-plus
            color: >
              {% set signal = states('sensor.crypto_dca') | default('') %}
              {% if 'üü¢' in signal %}green
              {% elif 'üî¥' in signal %}red
              {% elif 'üü°' in signal %}orange
              {% else %}grey{% endif %}
          - type: tile
            entity: binary_sensor.crypto_dca_good_time
            name: "–•–æ—Ä–æ—à–µ–µ –≤—Ä–µ–º—è"
            icon: mdi:thumb-up
            color: green
          - type: tile
            entity: input_number.crypto_dca_weekly_amount
            name: "üíµ –ë–∞–∑–æ–≤–∞—è —Å—É–º–º–∞"
            icon: mdi:cash
            features:
              - type: numeric-input
                mode: box
          - type: markdown
            content: |
              ### üí∞ DCA –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è
              | –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
              |----------|----------|
              | **F&G Index** | {{ state_attr('sensor.crypto_dca', 'fear_greed') | default('N/A') }} |
              | **–ú–Ω–æ–∂–∏—Ç–µ–ª—å** | x{{ state_attr('sensor.crypto_dca', 'multiplier') | default(1.0) }} |
              | **–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è** | ‚Ç¨{{ state_attr('sensor.crypto_dca', 'recommended') | default(100) }} |

              **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:**
              | –ú–æ–Ω–µ—Ç–∞ | –°—É–º–º–∞ |
              |--------|------:|
              | **BTC** | ‚Ç¨{{ state_attr('sensor.crypto_dca', 'alloc_btc') | default(0) }} |
              | **ETH** | ‚Ç¨{{ state_attr('sensor.crypto_dca', 'alloc_eth') | default(0) }} |
              | **Alts** | ‚Ç¨{{ state_attr('sensor.crypto_dca', 'alloc_alts') | default(0) }} |

              *{{ state_attr('sensor.crypto_dca', 'reason') | default('') }}*

              üìÖ –°–ª–µ–¥. DCA: {{ state_attr('sensor.crypto_dca', 'next_dca') | default('N/A') }}

      # ==========================================================================
      # ROW 8: –ê–õ–ï–†–¢–´ –ò –°–ò–ì–ù–ê–õ–´
      # ==========================================================================
      - type: grid
        title: "üö® –ê–ª–µ—Ä—Ç—ã"
        cards:
          - type: tile
            entity: binary_sensor.crypto_strong_buy_signal
            name: "Strong Buy"
            icon: mdi:arrow-up-bold-circle
            color: green
          - type: tile
            entity: binary_sensor.crypto_strong_sell_signal
            name: "Strong Sell"
            icon: mdi:arrow-down-bold-circle
            color: red
          - type: tile
            entity: binary_sensor.crypto_fg_extreme
            name: "F&G Extreme"
            icon: mdi:alert-circle
          - type: tile
            entity: binary_sensor.crypto_halving_soon
            name: "–•–∞–ª–≤–∏–Ω–≥"
            icon: mdi:timer-sand
          - type: tile
            entity: binary_sensor.crypto_price_alert_high
            name: "Price High"
            icon: mdi:arrow-up-circle
            color: green
          - type: tile
            entity: binary_sensor.crypto_price_alert_low
            name: "Price Low"
            icon: mdi:arrow-down-circle
            color: red
          - type: tile
            entity: binary_sensor.crypto_btc_fees_high
            name: "Fees High"
            icon: mdi:currency-btc
            color: orange
          - type: tile
            entity: binary_sensor.crypto_exchange_flow_alert
            name: "Exchange Flow"
            icon: mdi:bank-transfer

      # ==========================================================================
      # ROW 9: –ö–ò–¢–´
      # ==========================================================================
      - type: grid
        title: "üêã –ö–∏—Ç—ã"
        cards:
          - type: tile
            entity: sensor.crypto_whale_activity
            name: "Whale Activity"
            icon: mdi:whale
          - type: markdown
            content: |
              ### üêã Whale Tracking
              | –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
              |----------|----------|
              | **BTC –ü–æ—Ä–æ–≥** | {{ states('input_number.crypto_whale_btc_threshold') | default(100) }} BTC |
              | **ETH –ü–æ—Ä–æ–≥** | {{ states('input_number.crypto_whale_eth_threshold') | default(1000) }} ETH |

              *–î–ª—è –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è Whale Alert API*

      # ==========================================================================
      # ROW 10: –ì–†–ê–§–ò–ö–ò –¶–ï–ù (90 –¥–Ω–µ–π)
      # ==========================================================================
      - type: grid
        title: "üìà –ì—Ä–∞—Ñ–∏–∫–∏ —Ü–µ–Ω (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)"
        cards:
          - type: history-graph
            title: "BTC / ETH (USD)"
            hours_to_show: 2160
            entities:
              - entity: sensor.crypto_history_btc_usd
                name: "BTC"
              - entity: sensor.crypto_history_eth_usd
                name: "ETH"
          - type: history-graph
            title: "–ê–ª—å—Ç–∫–æ–∏–Ω—ã (USD)"
            hours_to_show: 2160
            entities:
              - entity: sensor.crypto_history_sol_usd
                name: "SOL"
              - entity: sensor.crypto_history_ton_usd
                name: "TON"
              - entity: sensor.crypto_history_ar_usd
                name: "AR"
          - type: history-graph
            title: "AI —Ç–æ–∫–µ–Ω—ã (USD)"
            hours_to_show: 2160
            entities:
              - entity: sensor.crypto_history_rndr_usd
                name: "RNDR"
              - entity: sensor.crypto_history_fet_usd
                name: "FET"
              - entity: sensor.crypto_history_tao_usd
                name: "TAO"
          - type: history-graph
            title: "Fear & Greed / BTC Dominance"
            hours_to_show: 2160
            entities:
              - entity: sensor.crypto_history_fear_greed
                name: "Fear & Greed"
              - entity: sensor.crypto_history_btc_dominance
                name: "BTC Dom %"
          - type: history-graph
            title: "RSI (BTC / ETH)"
            hours_to_show: 720
            entities:
              - entity: sensor.crypto_history_btc_rsi
                name: "BTC RSI"
              - entity: sensor.crypto_history_eth_rsi
                name: "ETH RSI"
          - type: statistic
            entity: sensor.crypto_history_btc_usd
            name: "BTC (7–¥)"
            period:
              calendar:
                period: week
            stat_type: mean
          - type: statistic
            entity: sensor.crypto_history_eth_usd
            name: "ETH (7–¥)"
            period:
              calendar:
                period: week
            stat_type: mean

      - type: grid
        title: "üìâ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ BTC –∑–∞ –ø–µ—Ä–∏–æ–¥—ã"
        cards:
          - type: markdown
            content: |
              ### üìä Bitcoin USD - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
              | –ü–µ—Ä–∏–æ–¥ | Min | Max | –°—Ä–µ–¥–Ω–µ–µ |
              |--------|-----|-----|---------|
              | **–°–µ–≥–æ–¥–Ω—è** | - | - | {{ states('sensor.crypto_history_btc_usd') }} |

              *–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.*
              *–ü–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ—è–≤—è—Ç—Å—è —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π.*
          - type: statistics-graph
            title: "BTC USD (–º–µ—Å—è—Ü)"
            entities:
              - sensor.crypto_history_btc_usd
            days_to_show: 30
            stat_types:
              - mean
              - min
              - max
          - type: statistics-graph
            title: "ETH USD (–º–µ—Å—è—Ü)"
            entities:
              - sensor.crypto_history_eth_usd
            days_to_show: 30
            stat_types:
              - mean
              - min
              - max
          - type: statistics-graph
            title: "Fear & Greed (–º–µ—Å—è—Ü)"
            entities:
              - sensor.crypto_history_fear_greed
            days_to_show: 30
            stat_types:
              - mean
              - min
              - max

      # ==========================================================================
      # ROW 12: –ù–ê–°–¢–†–û–ô–ö–ò
      # ==========================================================================
      - type: grid
        title: "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏"
        cards:
          - type: tile
            entity: input_number.crypto_dca_weekly_amount
            name: "DCA –ë—é–¥–∂–µ—Ç"
            icon: mdi:cash
            features:
              - type: numeric-input
                mode: box
          - type: tile
            entity: input_number.crypto_dca_btc_weight
            name: "–í–µ—Å BTC"
            icon: mdi:bitcoin
            features:
              - type: numeric-input
                mode: slider
          - type: tile
            entity: input_number.crypto_dca_eth_weight
            name: "–í–µ—Å ETH"
            icon: mdi:ethereum
            features:
              - type: numeric-input
                mode: slider
          - type: tile
            entity: input_number.crypto_dca_alt_weight
            name: "–í–µ—Å Alts"
            icon: mdi:currency-usd
            features:
              - type: numeric-input
                mode: slider
          - type: tile
            entity: input_number.crypto_rsi_oversold
            name: "RSI Oversold"
            icon: mdi:chart-line
            features:
              - type: numeric-input
                mode: slider
          - type: tile
            entity: input_number.crypto_rsi_overbought
            name: "RSI Overbought"
            icon: mdi:chart-line
            features:
              - type: numeric-input
                mode: slider
          - type: tile
            entity: input_number.crypto_fg_extreme_fear
            name: "F&G Fear"
            icon: mdi:emoticon-cry
            features:
              - type: numeric-input
                mode: slider
          - type: tile
            entity: input_number.crypto_fg_extreme_greed
            name: "F&G Greed"
            icon: mdi:emoticon-happy
            features:
              - type: numeric-input
                mode: slider
          - type: tile
            entity: input_number.crypto_whale_btc_threshold
            name: "Whale BTC"
            icon: mdi:whale
            features:
              - type: numeric-input
                mode: box
          - type: tile
            entity: input_number.crypto_whale_eth_threshold
            name: "Whale ETH"
            icon: mdi:whale
            features:
              - type: numeric-input
                mode: box
          - type: tile
            entity: input_number.crypto_btc_price_alert_low
            name: "BTC Alert Low"
            icon: mdi:arrow-down-circle
            features:
              - type: numeric-input
                mode: box

  # ==============================================================================
  # VIEW 7: FINANCE - –í–∞–ª—é—Ç—ã, –ò–Ω–¥–µ–∫—Å—ã, –ú–µ—Ç–∞–ª–ª—ã
  # ==============================================================================
  - title: Finance
    path: finance
    icon: mdi:finance
    type: sections
    max_columns: 3
    sections:
      # ==========================================================================
      # ROW 1: –í–ê–õ–Æ–¢–´
      # ==========================================================================
      - type: grid
        title: "üí± –ö—É—Ä—Å—ã –≤–∞–ª—é—Ç (–æ—Ç EUR)"
        cards:
          - type: markdown
            content: |
              ### üåç –û—Å–Ω–æ–≤–Ω—ã–µ –≤–∞–ª—é—Ç—ã
              | –í–∞–ª—é—Ç–∞ | –ö—É—Ä—Å | –ö–æ–¥ |
              |--------|-----:|-----|
              | üá∫üá∏ **–î–æ–ª–ª–∞—Ä –°–®–ê** | ${{ states('sensor.eur_usd_rate') }} | USD |
              | üá¨üáß **–§—É–Ω—Ç** | ¬£{{ states('sensor.eur_gbp_rate') }} | GBP |
              | üá®üá≠ **–§—Ä–∞–Ω–∫** | {{ states('sensor.eur_chf_rate') }} | CHF |
              | üáØüáµ **–ô–µ–Ω–∞** | ¬•{{ states('sensor.eur_jpy_rate') }} | JPY |

              *–ò—Å—Ç–æ—á–Ω–∏–∫: ECB (Frankfurter API)*
          - type: markdown
            content: |
              ### üåè –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ –≤–∞–ª—é—Ç—ã
              | –í–∞–ª—é—Ç–∞ | –ö—É—Ä—Å | –ö–æ–¥ |
              |--------|-----:|-----|
              | üá∑üá∫ **–†—É–±–ª—å** | ‚ÇΩ{{ states('sensor.eur_rub_rate') }} | RUB |
              | üá∫üá¶ **–ì—Ä–∏–≤–Ω–∞** | ‚Ç¥{{ states('sensor.eur_uah_rate') }} | UAH |
              | üá®üá≥ **–Æ–∞–Ω—å** | ¬•{{ states('sensor.eur_cny_rate') }} | CNY |
              | üáÆüá± **–®–µ–∫–µ–ª—å** | ‚Ç™{{ states('sensor.eur_ils_rate') }} | ILS |

              *–ò—Å—Ç–æ—á–Ω–∏–∫: FloatRates*
          - type: tile
            entity: sensor.eur_usd_rate
            name: "EUR/USD"
            icon: mdi:currency-usd
          - type: tile
            entity: sensor.eur_gbp_rate
            name: "EUR/GBP"
            icon: mdi:currency-gbp
          - type: tile
            entity: sensor.eur_rub_rate
            name: "EUR/RUB"
            icon: mdi:currency-rub

      # ==========================================================================
      # –ö–û–ù–í–ï–†–¢–û–† –í–ê–õ–Æ–¢
      # ==========================================================================
      - type: grid
        title: "üí± –ö–æ–Ω–≤–µ—Ä—Ç–æ—Ä –≤–∞–ª—é—Ç"
        cards:
          - type: entities
            entities:
              - entity: input_select.converter_currency
                name: "–í–∞–ª—é—Ç–∞"
              - entity: input_number.converter_amount
                name: "–°—É–º–º–∞"
          - type: markdown
            content: |
              ### üíµ –§–∏–∞—Ç–Ω—ã–µ –≤–∞–ª—é—Ç—ã
              | –í–∞–ª—é—Ç–∞ | –°—É–º–º–∞ |
              |--------|------:|
              | üá™üá∫ **EUR** | ‚Ç¨ {{ state_attr('sensor.currency_converter', 'to_eur') }} |
              | üá∫üá∏ **USD** | $ {{ state_attr('sensor.currency_converter', 'to_usd') }} |
              | üá∫üá¶ **UAH** | ‚Ç¥ {{ state_attr('sensor.currency_converter', 'to_uah') }} |
              | üá∑üá∫ **RUB** | ‚ÇΩ {{ state_attr('sensor.currency_converter', 'to_rub') }} |

              ### ‚Çø –ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã
              | –í–∞–ª—é—Ç–∞ | –°—É–º–º–∞ |
              |--------|------:|
              | ‚ÇÆ **USDT** | {{ state_attr('sensor.currency_converter', 'to_usdt') }} |
              | ‚Çø **BTC** | {{ state_attr('sensor.currency_converter', 'to_btc') }} |
              | üóÑÔ∏è **AR** | {{ state_attr('sensor.currency_converter', 'to_ar') }} |

      # ==========================================================================
      # ROW 2: –ë–ò–†–ñ–ï–í–´–ï –ò–ù–î–ï–ö–°–´
      # ==========================================================================
      - type: grid
        title: "üìà –ë–∏—Ä–∂–µ–≤—ã–µ –∏–Ω–¥–µ–∫—Å—ã"
        cards:
          - type: markdown
            content: |
              ### üìä –û—Å–Ω–æ–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã
              | –ò–Ω–¥–µ–∫—Å | –ó–Ω–∞—á–µ–Ω–∏–µ | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
              |--------|----------|-----------|
              | üá™üá∏ **IBEX 35** | {{ states('sensor.ibex_35') }} | {% set chg = state_attr('sensor.ibex_35', 'change_percent') | float(0) %}{{ 'üü¢' if chg > 0 else 'üî¥' if chg < 0 else '‚ö™' }} {{ chg }}% |
              | üá∫üá∏ **S&P 500** | {{ states('sensor.s_p_500') }} | {% set chg = state_attr('sensor.s_p_500', 'change_percent') | float(0) %}{{ 'üü¢' if chg > 0 else 'üî¥' if chg < 0 else '‚ö™' }} {{ chg }}% |

              *–ò—Å—Ç–æ—á–Ω–∏–∫: Alpha Vantage*
          - type: tile
            entity: sensor.ibex_35
            name: "IBEX 35"
            icon: mdi:chart-line
          - type: tile
            entity: sensor.s_p_500
            name: "S&P 500"
            icon: mdi:chart-areaspline

      # ==========================================================================
      # ROW 3: –î–†–ê–ì–û–¶–ï–ù–ù–´–ï –ú–ï–¢–ê–õ–õ–´
      # ==========================================================================
      - type: grid
        title: "ü•á –î—Ä–∞–≥–æ—Ü–µ–Ω–Ω—ã–µ –º–µ—Ç–∞–ª–ª—ã"
        cards:
          - type: markdown
            content: |
              ### üí∞ –¶–µ–Ω—ã –Ω–∞ –º–µ—Ç–∞–ª–ª—ã ($/oz)
              | –ú–µ—Ç–∞–ª–ª | –¶–µ–Ω–∞ | 24h |
              |--------|-----:|----:|
              | ü•á **–ó–æ–ª–æ—Ç–æ** | ${{ states('sensor.gold_price') }} | {% set chg = state_attr('sensor.gold_price', 'change_percent') | default(0) | float %}{{ 'üü¢' if chg > 0 else 'üî¥' if chg < 0 else '‚ö™' }} {{ chg | round(2) }}% |
              | ü•à **–°–µ—Ä–µ–±—Ä–æ** | ${{ states('sensor.silver_price') }} | {% set chg = state_attr('sensor.silver_price', 'change_percent') | default(0) | float %}{{ 'üü¢' if chg > 0 else 'üî¥' if chg < 0 else '‚ö™' }} {{ chg | round(2) }}% |
              | ‚¨ú **–ü–ª–∞—Ç–∏–Ω–∞** | ${{ states('sensor.platinum_price') }} | {% set chg = state_attr('sensor.platinum_price', 'change_percent') | default(0) | float %}{{ 'üü¢' if chg > 0 else 'üî¥' if chg < 0 else '‚ö™' }} {{ chg | round(2) }}% |
              | üî∑ **–ü–∞–ª–ª–∞–¥–∏–π** | ${{ states('sensor.palladium_price') }} | {% set chg = state_attr('sensor.palladium_price', 'change_percent') | default(0) | float %}{{ 'üü¢' if chg > 0 else 'üî¥' if chg < 0 else '‚ö™' }} {{ chg | round(2) }}% |

              *–ò—Å—Ç–æ—á–Ω–∏–∫–∏: goldprice.org, Alpha Vantage*
          - type: tile
            entity: sensor.gold_price
            name: "–ó–æ–ª–æ—Ç–æ"
            icon: mdi:gold
          - type: tile
            entity: sensor.silver_price
            name: "–°–µ—Ä–µ–±—Ä–æ"
            icon: mdi:circle-outline
          - type: tile
            entity: sensor.platinum_price
            name: "–ü–ª–∞—Ç–∏–Ω–∞"
            icon: mdi:shimmer
          - type: tile
            entity: sensor.palladium_price
            name: "–ü–∞–ª–ª–∞–¥–∏–π"
            icon: mdi:atom

      # ==========================================================================
      # ROW 4: –°–í–û–î–ö–ê
      # ==========================================================================
      - type: grid
        title: "üìã –°–≤–æ–¥–∫–∞ —Ä—ã–Ω–∫–∞"
        cards:
          - type: markdown
            content: |
              ### üåê –û–±–∑–æ—Ä —Ä—ã–Ω–∫–æ–≤

              **–í–∞–ª—é—Ç—ã (EUR):**
              - USD: ${{ states('sensor.eur_usd_rate') }} | GBP: ¬£{{ states('sensor.eur_gbp_rate') }}
              - RUB: ‚ÇΩ{{ states('sensor.eur_rub_rate') }} | UAH: ‚Ç¥{{ states('sensor.eur_uah_rate') }}

              **–ò–Ω–¥–µ–∫—Å—ã:**
              - IBEX: {{ states('sensor.ibex_35') }} ({{ state_attr('sensor.ibex_35', 'change_percent') | default(0) }}%)
              - S&P: {{ states('sensor.s_p_500') }} ({{ state_attr('sensor.s_p_500', 'change_percent') | default(0) }}%)

              **–ú–µ—Ç–∞–ª–ª—ã ($/oz):**
              - ü•á ${{ states('sensor.gold_price') | float(0) | round(0) }} | ü•à ${{ states('sensor.silver_price') | float(0) | round(0) }}
              - ‚¨ú ${{ states('sensor.platinum_price') | float(0) | round(0) }} | üî∑ ${{ states('sensor.palladium_price') | float(0) | round(0) }}

      # ==========================================================================
      # ROW 5: –ì–†–ê–§–ò–ö–ò –í–ê–õ–Æ–¢
      # ==========================================================================
      - type: grid
        title: "üìä –ò—Å—Ç–æ—Ä–∏—è –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç"
        cards:
          - type: history-graph
            title: "EUR/USD, EUR/GBP (90 –¥–Ω–µ–π)"
            hours_to_show: 2160
            entities:
              - entity: sensor.eur_usd_rate
                name: "USD"
              - entity: sensor.eur_gbp_rate
                name: "GBP"
          - type: history-graph
            title: "EUR/RUB, EUR/UAH (90 –¥–Ω–µ–π)"
            hours_to_show: 2160
            entities:
              - entity: sensor.eur_rub_rate
                name: "RUB"
              - entity: sensor.eur_uah_rate
                name: "UAH"
          - type: statistics-graph
            title: "EUR/USD (–º–µ—Å—è—Ü)"
            entities:
              - sensor.eur_usd_rate
            days_to_show: 30
            stat_types:
              - mean
              - min
              - max

      # ==========================================================================
      # ROW 6: –ì–†–ê–§–ò–ö–ò –ú–ï–¢–ê–õ–õ–û–í
      # ==========================================================================
      - type: grid
        title: "üìä –ò—Å—Ç–æ—Ä–∏—è —Ü–µ–Ω –º–µ—Ç–∞–ª–ª–æ–≤"
        cards:
          - type: history-graph
            title: "–ó–æ–ª–æ—Ç–æ, –°–µ—Ä–µ–±—Ä–æ (90 –¥–Ω–µ–π)"
            hours_to_show: 2160
            entities:
              - entity: sensor.gold_price
                name: "–ó–æ–ª–æ—Ç–æ"
              - entity: sensor.silver_price
                name: "–°–µ—Ä–µ–±—Ä–æ"
          - type: history-graph
            title: "–ü–ª–∞—Ç–∏–Ω–∞, –ü–∞–ª–ª–∞–¥–∏–π (90 –¥–Ω–µ–π)"
            hours_to_show: 2160
            entities:
              - entity: sensor.platinum_price
                name: "–ü–ª–∞—Ç–∏–Ω–∞"
              - entity: sensor.palladium_price
                name: "–ü–∞–ª–ª–∞–¥–∏–π"
          - type: statistics-graph
            title: "–ó–æ–ª–æ—Ç–æ (–º–µ—Å—è—Ü)"
            entities:
              - sensor.gold_price
            days_to_show: 30
            stat_types:
              - mean
              - min
              - max
          - type: statistics-graph
            title: "–°–µ—Ä–µ–±—Ä–æ (–º–µ—Å—è—Ü)"
            entities:
              - sensor.silver_price
            days_to_show: 30
            stat_types:
              - mean
              - min
              - max

      # ==========================================================================
      # ROW 7: –ì–†–ê–§–ò–ö–ò –ò–ù–î–ï–ö–°–û–í
      # ==========================================================================
      - type: grid
        title: "üìä –ò—Å—Ç–æ—Ä–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤"
        cards:
          - type: history-graph
            title: "IBEX 35, S&P 500 (90 –¥–Ω–µ–π)"
            hours_to_show: 2160
            entities:
              - entity: sensor.ibex_35
                name: "IBEX 35"
              - entity: sensor.s_p_500
                name: "S&P 500"
          - type: statistics-graph
            title: "IBEX 35 (–º–µ—Å—è—Ü)"
            entities:
              - sensor.ibex_35
            days_to_show: 30
            stat_types:
              - mean
              - min
              - max

  # ==============================================================================
  # VIEW 8: CONTEXT - –ö–æ–Ω—Ç–µ–∫—Å—Ç –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–æ–º–∞
  # ==============================================================================
  - title: Context
    path: context
    icon: mdi:home-analytics
    type: sections
    max_columns: 2
    sections:
      # --------------------------------------------------------------------------
      # –†–ï–ñ–ò–ú –î–ù–Ø
      # --------------------------------------------------------------------------
      - type: grid
        title: "üìÖ –†–µ–∂–∏–º –¥–Ω—è"
        cards:
          - type: tile
            entity: sensor.day_mode
            name: "–¢–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º"
          - type: tile
            entity: input_select.day_mode_override
            name: "–ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ"
          - type: markdown
            content: |
              ### {{ state_attr('sensor.day_mode', 'state_ru') }}

              {{ state_attr('sensor.day_mode', 'description_ru') }}

              | –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
              |----------|----------|
              | **–†–µ–∂–∏–º** | {{ state_attr('sensor.day_mode', 'state_ru') }} |
              | **–†—É—á–Ω–æ–π** | {{ '–î–∞' if state_attr('sensor.day_mode', 'is_manual_override') == 'True' else '–ù–µ—Ç' }} |
              | **–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** | {{ state_attr('sensor.day_mode', 'activity_level') }} |
          - type: entities
            entities:
              - entity: input_select.day_mode_override
                name: "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–µ–∂–∏–º"

      # --------------------------------------------------------------------------
      # –ö–û–ì–ù–ò–¢–ò–í–ù–ê–Ø –ù–ê–ì–†–£–ó–ö–ê
      # --------------------------------------------------------------------------
      - type: grid
        title: "üß† –ö–æ–≥–Ω–∏—Ç–∏–≤–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞"
        cards:
          - type: tile
            entity: sensor.cognitive_load
            name: "–£—Ä–æ–≤–µ–Ω—å"
            color: >
              {% set load = states('sensor.cognitive_load') %}
              {% if load == 'low' %}green
              {% elif load == 'medium' %}orange
              {% else %}red{% endif %}
          - type: tile
            entity: binary_sensor.overload_detected
            name: "–ü–µ—Ä–µ–≥—Ä—É–∑–∫–∞"
            color: red
          - type: tile
            entity: binary_sensor.break_recommended
            name: "–ù—É–∂–µ–Ω –ø–µ—Ä–µ—Ä—ã–≤"
            color: orange
          - type: markdown
            content: |
              ### {{ state_attr('sensor.cognitive_load', 'state_ru') }} –Ω–∞–≥—Ä—É–∑–∫–∞

              **–§–∏–ª—å—Ç—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:** {{ state_attr('sensor.cognitive_load', 'notification_filter_ru') }}

              **–§–∞–∫—Ç–æ—Ä—ã:** {{ state_attr('sensor.cognitive_load', 'factors') }}

              {% if is_state('binary_sensor.break_recommended', 'on') %}
              ---
              {{ state_attr('binary_sensor.break_recommended', 'suggestion_ru') }}
              {% endif %}

      # --------------------------------------------------------------------------
      # –°–õ–ï–î–£–Æ–©–ï–ï –õ–£–ß–®–ï–ï –î–ï–ô–°–¢–í–ò–ï
      # --------------------------------------------------------------------------
      - type: grid
        title: "üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏"
        cards:
          - type: tile
            entity: sensor.next_best_action
            name: "–î–µ–π—Å—Ç–≤–∏–µ"
          - type: markdown
            content: |
              ### {{ state_attr('sensor.next_best_action', 'action_ru') }}

              {{ state_attr('sensor.next_best_action', 'description_ru') }}

              ---
              **–ö–æ–Ω—Ç–µ–∫—Å—Ç:** {{ state_attr('sensor.next_best_action', 'context') }}

      # --------------------------------------------------------------------------
      # –ü–û–í–ï–î–ï–ù–ò–ï –î–û–ú–ê
      # --------------------------------------------------------------------------
      - type: grid
        title: "üè† –ü–æ–≤–µ–¥–µ–Ω–∏–µ –¥–æ–º–∞"
        cards:
          - type: tile
            entity: sensor.house_activity
            name: "–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å"
            color: >
              {% set act = states('sensor.house_activity') %}
              {% if act == 'empty' %}grey
              {% elif act == 'quiet_presence' %}light-green
              {% else %}green{% endif %}
          - type: tile
            entity: sensor.house_mood
            name: "–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ"
            color: >
              {% set mood = states('sensor.house_mood') %}
              {% if mood == 'calm' %}green
              {% elif mood == 'focused' %}blue
              {% elif mood == 'tense' %}orange
              {% else %}red{% endif %}
          - type: tile
            entity: sensor.anomaly_home_behavior
            name: "–ê–Ω–æ–º–∞–ª–∏–∏"
          - type: tile
            entity: binary_sensor.suspicious_silence
            name: "–ü–æ–¥–æ–∑—Ä. —Ç–∏—à–∏–Ω–∞"
            color: red
          - type: markdown
            content: |
              ### {{ state_attr('sensor.house_mood', 'state_ru') }}

              {{ state_attr('sensor.house_mood', 'recommendation_ru') }}

              | –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
              |----------|----------|
              | **–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** | {{ state_attr('sensor.house_activity', 'state_ru') }} |
              | **CO2** | {{ state_attr('sensor.house_mood', 'co2_level') }} |
              | **–ù–∞–≥—Ä—É–∑–∫–∞** | {{ state_attr('sensor.house_mood', 'cognitive_load') }} |
              | **–ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ** | {{ state_attr('sensor.house_activity', 'power_consumption') }} |

      # --------------------------------------------------------------------------
      # –£–°–õ–û–í–ò–Ø –î–õ–Ø –†–ê–ë–û–¢–´
      # --------------------------------------------------------------------------
      - type: grid
        title: "üíº –£—Å–ª–æ–≤–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã"
        cards:
          - type: tile
            entity: binary_sensor.optimal_work_conditions
            name: "–û–ø—Ç–∏–º–∞–ª—å–Ω–æ"
            color: green
          - type: markdown
            content: |
              ### {% if is_state('binary_sensor.optimal_work_conditions', 'on') %}‚úÖ –û—Ç–ª–∏—á–Ω—ã–µ —É—Å–ª–æ–≤–∏—è{% else %}‚ö†Ô∏è –£—Å–ª–æ–≤–∏—è –Ω–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã{% endif %}

              {{ state_attr('binary_sensor.optimal_work_conditions', 'factors') }}

              {{ state_attr('binary_sensor.optimal_work_conditions', 'recommendation_ru') }}

      # --------------------------------------------------------------------------
      # –ì–û–†–û–î –ò –í–´–•–û–î
      # --------------------------------------------------------------------------
      - type: grid
        title: "üö∂ –ì–æ—Ä–æ–¥ –∏ –≤—ã—Ö–æ–¥"
        cards:
          - type: tile
            entity: sensor.go_out_score
            name: "–û—Ü–µ–Ω–∫–∞ –≤—ã—Ö–æ–¥–∞"
            color: >
              {% set score = states('sensor.go_out_score') | int(50) %}
              {% if score >= 70 %}green
              {% elif score >= 50 %}light-green
              {% elif score >= 30 %}orange
              {% else %}red{% endif %}
          - type: tile
            entity: sensor.city_stress_index
            name: "–°—Ç—Ä–µ—Å—Å –≥–æ—Ä–æ–¥–∞"
          - type: tile
            entity: binary_sensor.perfect_walk_time
            name: "–í—Ä–µ–º—è –ø—Ä–æ–≥—É–ª–∫–∏"
            color: green
          - type: tile
            entity: binary_sensor.travel_context
            name: "–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ"
          - type: markdown
            content: |
              ### {{ state_attr('sensor.go_out_score', 'level_emoji') }} {{ state_attr('sensor.go_out_score', 'level_ru') }} - {{ states('sensor.go_out_score') }}%

              {{ state_attr('sensor.go_out_score', 'recommendation_ru') }}

              **–ü–æ–≥–æ–¥–∞:** {{ state_attr('sensor.go_out_score', 'weather_details') }}

              **–ü—Ä–æ–±–ª–µ–º—ã:** {{ state_attr('sensor.go_out_score', 'all_issues_ru') }}

              ---
              **–°—Ç—Ä–µ—Å—Å –≥–æ—Ä–æ–¥–∞:** {{ state_attr('sensor.city_stress_index', 'state_ru') }}

              {{ state_attr('sensor.city_stress_index', 'recommendation_ru') }}

      # --------------------------------------------------------------------------
      # –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø –ò –ë–ê–õ–ê–ù–°
      # --------------------------------------------------------------------------
      - type: grid
        title: "üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"
        cards:
          - type: tile
            entity: sensor.notification_intensity
            name: "–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å"
          - type: tile
            entity: sensor.recommended_notification_mode
            name: "–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ä–µ–∂–∏–º"
          - type: tile
            entity: binary_sensor.night_watch_active
            name: "–ù–æ—á–Ω–æ–π —Å—Ç–æ—Ä–æ–∂"
          - type: markdown
            content: |
              ### {{ state_attr('sensor.notification_intensity', 'level_ru') }}

              {{ state_attr('sensor.notification_intensity', 'description_ru') }}

              **–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ä–µ–∂–∏–º:** {{ state_attr('sensor.recommended_notification_mode', 'state_ru') }}

              *–ü—Ä–∏—á–∏–Ω–∞: {{ state_attr('sensor.recommended_notification_mode', 'reason_ru') }}*

  # ==============================================================================
  # VIEW 9: ABRIKOS - –ü–∏—Ç–æ–º–µ—Ü
  # ==============================================================================
  - title: Abrikos
    path: abrikos
    icon: mdi:dog
    type: sections
    max_columns: 2
    sections:
      # --------------------------------------------------------------------------
      # –û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø
      # --------------------------------------------------------------------------
      - type: grid
        title: "üêï –ê–±—Ä–∏–∫–æ—Å"
        cards:
          - type: markdown
            content: |
              # üêï –ê–±—Ä–∏–∫–æ—Å

              **–ü–æ—Ä–æ–¥–∞:** {{ state_attr('sensor.abrikos_age', 'breed_ru') | default('–ê–Ω–≥–ª–∏–π—Å–∫–∏–π –∫–æ–∫–µ—Ä-—Å–ø–∞–Ω–∏–µ–ª—å') }}

              **–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è:** {{ state_attr('sensor.abrikos_age', 'birth_date') | default('01.09.2025') }}

              **–í–æ–∑—Ä–∞—Å—Ç:** {{ state_attr('sensor.abrikos_age', 'age_ru') | default('–í—ã—á–∏—Å–ª—è–µ—Ç—Å—è...') }} ({{ states('sensor.abrikos_age') | default(0) }} –¥–Ω–µ–π)

              **–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —ç—Ç–∞–ø:** {{ state_attr('sensor.abrikos_age', 'life_stage_ru') | default('–í—ã—á–∏—Å–ª—è–µ—Ç—Å—è...') }}
          - type: tile
            entity: sensor.abrikos_age
            name: "–í–æ–∑—Ä–∞—Å—Ç (–¥–Ω–µ–π)"
            icon: mdi:cake-variant

      # --------------------------------------------------------------------------
      # –°–û–°–¢–û–Ø–ù–ò–ï
      # --------------------------------------------------------------------------
      - type: grid
        title: "üíö –°–æ—Å—Ç–æ—è–Ω–∏–µ"
        cards:
          - type: tile
            entity: sensor.abrikos_emotional_state
            name: "–≠–º–æ—Ü–∏–∏"
            color: >
              {% set st = states('sensor.abrikos_emotional_state') %}
              {% if st == 'calm' %}green
              {% elif st == 'playful' %}light-green
              {% elif st == 'tired' %}grey
              {% else %}orange{% endif %}
          - type: tile
            entity: sensor.abrikos_energy_level
            name: "–≠–Ω–µ—Ä–≥–∏—è"
            color: >
              {% set lvl = states('sensor.abrikos_energy_level') %}
              {% if lvl == 'high' %}green
              {% elif lvl == 'normal' %}light-green
              {% else %}grey{% endif %}
          - type: tile
            entity: binary_sensor.abrikos_needs_attention
            name: "–ù—É–∂–Ω–æ –≤–Ω–∏–º–∞–Ω–∏–µ"
            color: red
          - type: markdown
            content: |
              ### {{ state_attr('sensor.abrikos_emotional_state', 'emoji') | default('üêï') }} {{ state_attr('sensor.abrikos_emotional_state', 'state_ru') | default('–ó–∞–≥—Ä—É–∑–∫–∞...') }}

              **–ü—Ä–∏—á–∏–Ω–∞:** {{ state_attr('sensor.abrikos_emotional_state', 'reason_ru') | default('–ó–∞–≥—Ä—É–∑–∫–∞...') }}

              {{ state_attr('sensor.abrikos_emotional_state', 'recommendation_ru') | default('') }}

              ---
              **–≠–Ω–µ—Ä–≥–∏—è:** {{ state_attr('sensor.abrikos_energy_level', 'state_ru') | default('–ó–∞–≥—Ä—É–∑–∫–∞...') }}

              {{ state_attr('sensor.abrikos_energy_level', 'activity_recommendation_ru') | default('') }}

              **–ü–æ–¥—Ö–æ–¥—è—â–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:** {{ state_attr('sensor.abrikos_energy_level', 'suitable_activities_ru') | default('–ó–∞–≥—Ä—É–∑–∫–∞...') }}

      # --------------------------------------------------------------------------
      # –ü–†–û–ì–£–õ–ö–ò
      # --------------------------------------------------------------------------
      - type: grid
        title: "üö∂ –ü—Ä–æ–≥—É–ª–∫–∏"
        cards:
          - type: tile
            entity: sensor.abrikos_time_since_walk
            name: "–° –ø—Ä–æ–≥—É–ª–∫–∏"
            color: >
              {% set hrs = states('sensor.abrikos_time_since_walk') | float(0) %}
              {% if hrs > 6 %}red
              {% elif hrs > 4 %}orange
              {% else %}green{% endif %}
          - type: tile
            entity: binary_sensor.abrikos_good_walk_time
            name: "–•–æ—Ä–æ—à–µ–µ –≤—Ä–µ–º—è"
            color: green
          - type: tile
            entity: input_datetime.abrikos_last_walk
            name: "–ü–æ—Å–ª–µ–¥–Ω—è—è –ø—Ä–æ–≥—É–ª–∫–∞"
          - type: markdown
            content: |
              ### {{ state_attr('sensor.abrikos_time_since_walk', 'status_ru') | default('–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö') }}

              **–° –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–≥—É–ª–∫–∏:** {{ states('sensor.abrikos_time_since_walk') | default(0) }} —á–∞—Å–æ–≤

              **–ü–æ—Å–ª–µ–¥–Ω—è—è –ø—Ä–æ–≥—É–ª–∫–∞:** {{ state_attr('sensor.abrikos_time_since_walk', 'last_walk_formatted') | default('–ù–µ –∑–∞–ø–∏—Å–∞–Ω–æ') }}

              ---
              **–£—Å–ª–æ–≤–∏—è –¥–ª—è –ø—Ä–æ–≥—É–ª–∫–∏:**
              {{ state_attr('binary_sensor.abrikos_good_walk_time', 'factors_ru') | default('–ó–∞–≥—Ä—É–∑–∫–∞...') }}

              {% if is_state('binary_sensor.abrikos_good_walk_time', 'on') %}
              ‚úÖ **–°–µ–π—á–∞—Å —Ö–æ—Ä–æ—à–µ–µ –≤—Ä–µ–º—è –¥–ª—è –ø—Ä–æ–≥—É–ª–∫–∏!**
              {% endif %}
          - type: button
            name: "ü¶Æ –ó–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ–≥—É–ª–∫—É"
            icon: mdi:paw
            tap_action:
              action: perform-action
              perform_action: input_datetime.set_datetime
              target:
                entity_id: input_datetime.abrikos_last_walk
              data:
                timestamp: "{{ as_timestamp(now()) | int }}"

      # --------------------------------------------------------------------------
      # –û–ë–£–ß–ï–ù–ò–ï
      # --------------------------------------------------------------------------
      - type: grid
        title: "üéì –û–±—É—á–µ–Ω–∏–µ"
        cards:
          - type: tile
            entity: sensor.abrikos_training_progress
            name: "–ü—Ä–æ–≥—Ä–µ—Å—Å"
            color: >
              {% set prog = states('sensor.abrikos_training_progress') | int(0) %}
              {% if prog >= 80 %}green
              {% elif prog >= 50 %}light-green
              {% elif prog >= 20 %}orange
              {% else %}grey{% endif %}
          - type: tile
            entity: input_number.abrikos_training_progress
            name: "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å"
            features:
              - type: numeric-input
                mode: slider
          - type: markdown
            content: |
              ### {{ state_attr('sensor.abrikos_training_progress', 'level_ru') | default('–ù–æ–≤–∏—á–æ–∫') }} - {{ states('sensor.abrikos_training_progress') | default(0) }}%

              {{ state_attr('sensor.abrikos_training_progress', 'description_ru') | default('–¢–æ–ª—å–∫–æ –Ω–∞—á–∏–Ω–∞–µ–º –æ–±—É—á–µ–Ω–∏–µ.') }}

              ---
              **–°–ª–µ–¥—É—é—â–∏–µ —Ü–µ–ª–∏:**
              {{ state_attr('sensor.abrikos_training_progress', 'next_goals_ru') | default('–ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã') }}

      # --------------------------------------------------------------------------
      # –ö–û–†–ú–õ–ï–ù–ò–ï
      # --------------------------------------------------------------------------
      - type: grid
        title: "üçñ –ö–æ—Ä–º–ª–µ–Ω–∏–µ"
        cards:
          - type: tile
            entity: input_datetime.abrikos_last_feeding
            name: "–ü–æ—Å–ª–µ–¥–Ω–µ–µ –∫–æ—Ä–º–ª–µ–Ω–∏–µ"
          - type: button
            name: "üçñ –ó–∞–ø–∏—Å–∞—Ç—å –∫–æ—Ä–º–ª–µ–Ω–∏–µ"
            icon: mdi:food-drumstick
            tap_action:
              action: perform-action
              perform_action: input_datetime.set_datetime
              target:
                entity_id: input_datetime.abrikos_last_feeding
              data:
                datetime: "{{ now().strftime('%Y-%m-%d %H:%M:%S') }}"

      # --------------------------------------------------------------------------
      # –ö–ê–ú–ï–†–ê –ò –ú–û–ù–ò–¢–û–†–ò–ù–ì
      # --------------------------------------------------------------------------
      - type: grid
        title: "üìπ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞ –∫–∞–º–µ—Ä–µ"
        cards:
          - type: tile
            entity: sensor.abrikos_camera_activity
            name: "–ù–∞ –∫–∞–º–µ—Ä–µ"
          - type: markdown
            content: |
              ### {{ state_attr('sensor.abrikos_camera_activity', 'state_ru') }}

              **–ü–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–∑ –Ω–∞ –∫–∞–º–µ—Ä–µ:** {{ state_attr('sensor.abrikos_camera_activity', 'last_seen_on_camera') }}

              {{ state_attr('sensor.abrikos_camera_activity', 'recommendation_ru') }}

  # ==============================================================================
  # VIEW 10: SECURITY - –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∫–∞–º–µ—Ä—ã
  # ==============================================================================
  - title: Security
    path: security
    icon: mdi:shield-home
    type: sections
    max_columns: 2
    sections:
      # --------------------------------------------------------------------------
      # –°–¢–ê–¢–£–° –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò
      # --------------------------------------------------------------------------
      - type: grid
        title: "üõ°Ô∏è –°—Ç–∞—Ç—É—Å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏"
        cards:
          - type: tile
            entity: sensor.security_surface
            name: "–ü–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å –∞—Ç–∞–∫–∏"
            color: >
              {% set surf = states('sensor.security_surface') %}
              {% if surf == 'low' %}green
              {% elif surf == 'medium' %}orange
              {% else %}red{% endif %}
          - type: tile
            entity: binary_sensor.camera_context_alert
            name: "–ö–∞–º–µ—Ä–∞ –∞–ª–µ—Ä—Ç"
            color: red
          - type: tile
            entity: binary_sensor.camera_unusual_activity
            name: "–ù–µ–æ–±—ã—á–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å"
            color: orange
          - type: markdown
            content: |
              ### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: {{ state_attr('sensor.security_surface', 'state_ru') }}

              **–§–∞–∫—Ç–æ—Ä—ã —Ä–∏—Å–∫–∞:** {{ state_attr('sensor.security_surface', 'factors_ru') }}

              {{ state_attr('sensor.security_surface', 'recommendation_ru') }}

      # --------------------------------------------------------------------------
      # –†–ï–ñ–ò–ú –ö–ê–ú–ï–†
      # --------------------------------------------------------------------------
      - type: grid
        title: "üìπ –ö–∞–º–µ—Ä—ã"
        cards:
          - type: tile
            entity: sensor.camera_privacy_mode
            name: "–†–µ–∂–∏–º –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏"
            color: >
              {% set mode = states('sensor.camera_privacy_mode') %}
              {% if mode == 'open' %}green
              {% elif mode == 'limited' %}orange
              {% else %}grey{% endif %}
          - type: tile
            entity: binary_sensor.camera_ai_available
            name: "AI –¥–æ—Å—Ç—É–ø–µ–Ω"
            color: green
          - type: tile
            entity: binary_sensor.camera_presence_detected
            name: "–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ"
          - type: tile
            entity: sensor.camera_activity_type
            name: "–¢–∏–ø –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏"
          - type: markdown
            content: |
              ### {{ state_attr('sensor.camera_privacy_mode', 'state_ru') }}

              {{ state_attr('sensor.camera_privacy_mode', 'description_ru') }}

              **–ü—Ä–∏—á–∏–Ω–∞:** {{ state_attr('sensor.camera_privacy_mode', 'reason_ru') }}

              ---
              **AI –∞–Ω–∞–ª–∏–∑:** {{ '–î–æ—Å—Ç—É–ø–µ–Ω' if is_state('binary_sensor.camera_ai_available', 'on') else '–ù–µ–¥–æ—Å—Ç—É–ø–µ–Ω' }}

              {{ state_attr('binary_sensor.camera_ai_available', 'reason_ru') }}

      # --------------------------------------------------------------------------
      # –î–ï–¢–ï–ö–¶–ò–Ø
      # --------------------------------------------------------------------------
      - type: grid
        title: "üëÅÔ∏è –î–µ—Ç–µ–∫—Ü–∏—è"
        cards:
          - type: tile
            entity: sensor.camera_activity_type
            name: "–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ"
            color: >
              {% set act = states('sensor.camera_activity_type') %}
              {% if act == 'human' %}blue
              {% elif act == 'dog' %}green
              {% elif act == 'unknown' %}orange
              {% else %}grey{% endif %}
          - type: markdown
            content: |
              ### {{ state_attr('sensor.camera_activity_type', 'state_ru') }}

              | –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
              |----------|----------|
              | **–¢–∏–ø** | {{ state_attr('sensor.camera_activity_type', 'state_ru') }} |
              | **–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å** | {{ state_attr('sensor.camera_activity_type', 'confidence') }}% |
              | **–í—Ä–µ–º—è** | {{ state_attr('sensor.camera_activity_type', 'last_analysis') }} |

      # --------------------------------------------------------------------------
      # –ê–õ–ï–†–¢–´
      # --------------------------------------------------------------------------
      - type: grid
        title: "üö® –ê–ª–µ—Ä—Ç—ã"
        cards:
          - type: tile
            entity: binary_sensor.camera_unusual_activity
            name: "–ù–µ–æ–±—ã—á–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å"
            color: red
          - type: tile
            entity: binary_sensor.camera_context_alert
            name: "–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –∞–ª–µ—Ä—Ç"
            color: red
          - type: tile
            entity: binary_sensor.suspicious_silence
            name: "–ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∏—à–∏–Ω–∞"
            color: orange
          - type: tile
            entity: sensor.anomaly_home_behavior
            name: "–ê–Ω–æ–º–∞–ª–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è"
          - type: markdown
            content: |
              {% if is_state('binary_sensor.camera_unusual_activity', 'on') %}
              ### ‚ö†Ô∏è –ù–µ–æ–±—ã—á–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å!
              {{ state_attr('binary_sensor.camera_unusual_activity', 'reason_ru') }}

              **–£—Ä–æ–≤–µ–Ω—å:** {{ state_attr('binary_sensor.camera_unusual_activity', 'severity') }}
              {% endif %}

              {% if is_state('binary_sensor.camera_context_alert', 'on') %}
              ### üö® –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ!
              {{ state_attr('binary_sensor.camera_context_alert', 'description_ru') }}

              {{ state_attr('binary_sensor.camera_context_alert', 'action_ru') }}
              {% endif %}

              {% if is_state('binary_sensor.suspicious_silence', 'on') %}
              ### üîá –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∏—à–∏–Ω–∞
              {{ state_attr('binary_sensor.suspicious_silence', 'reason_ru') }}

              {{ state_attr('binary_sensor.suspicious_silence', 'recommendation_ru') }}
              {% endif %}

              {% if not is_state('binary_sensor.camera_unusual_activity', 'on') and not is_state('binary_sensor.camera_context_alert', 'on') and not is_state('binary_sensor.suspicious_silence', 'on') %}
              ### ‚úÖ –í—Å—ë —Å–ø–æ–∫–æ–π–Ω–æ
              –ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∞–ª–µ—Ä—Ç–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.
              {% endif %}

      # --------------------------------------------------------------------------
      # –¢–†–ê–î–ò–¶–ò–û–ù–ù–ê–Ø –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨
      # --------------------------------------------------------------------------
      - type: grid
        title: "üåç –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å"
        cards:
          - type: tile
            entity: sensor.fire_risk_catalonia
            name: "–†–∏—Å–∫ –ø–æ–∂–∞—Ä–æ–≤"
            icon: mdi:fire
          - type: tile
            entity: sensor.earthquakes_nearest
            name: "–ó–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏—è"
            icon: mdi:earth
