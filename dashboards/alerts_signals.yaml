# Crypto Inspect - Alerts & Signals Dashboard
# Monitoring alerts, signals, and notifications

title: Alerts & Signals
path: alerts-signals
icon: mdi:bell
type: sections
max_columns: 3
sections:
  # Alert Status
  - type: grid
    title: "ðŸ”” Alert Monitoring"
    cards:
      - type: custom:mushroom-entity-card
        entity: sensor.crypto_inspect_pending_alerts_count
        name: Pending Alerts
        icon: mdi:bell-badge
        icon_color: |
          {% set count = states('sensor.crypto_inspect_pending_alerts_count') | int(0) %}
          {% if count > 0 %}orange{% else %}green{% endif %}

      - type: custom:mushroom-entity-card
        entity: sensor.crypto_inspect_pending_alerts_critical
        name: Critical Alerts
        icon: mdi:bell-alert
        icon_color: |
          {% set count = states('sensor.crypto_inspect_pending_alerts_critical') | int(0) %}
          {% if count > 0 %}red{% else %}green{% endif %}

      - type: custom:mushroom-entity-card
        entity: sensor.crypto_inspect_active_alerts_count
        name: Active Alerts
        icon: mdi:bell-ring
        icon_color: |
          {% set count = states('sensor.crypto_inspect_active_alerts_count') | int(0) %}
          {% if count > 0 %}red{% else %}green{% endif %}

      - type: custom:mushroom-entity-card
        entity: sensor.crypto_inspect_notification_mode
        name: Notification Mode
        icon: mdi:bell-cog

  # Trading Signals
  - type: grid
    title: "ðŸ“¡ Trading Signals"
    cards:
      - type: custom:mushroom-entity-card
        entity: sensor.crypto_inspect_signals_today
        name: Today's Signals
        icon: mdi:signal

      - type: custom:mushroom-entity-card
        entity: sensor.crypto_inspect_signals_win_rate
        name: Win Rate
        icon: mdi:trophy
        icon_color: |
          {% set rate = states('sensor.crypto_inspect_signals_win_rate') | float(50) %}
          {% if rate > 70 %}green{% elif rate > 50 %}orange{% else %}red{% endif %}

      - type: custom:mushroom-entity-card
        entity: sensor.crypto_inspect_signals_last
        name: Last Signal
        icon: mdi:traffic-light

      - type: custom:mushroom-entity-card
        entity: sensor.crypto_inspect_red_flags
        name: Red Flags
        icon: mdi:flag-variant
        icon_color: |
          {% set flags = states('sensor.crypto_inspect_red_flags') | int(0) %}
          {% if flags > 0 %}red{% else %}green{% endif %}

  # Whale Activity
  - type: grid
    title: "ðŸ‹ Whale Monitoring"
    cards:
      - type: custom:mushroom-entity-card
        entity: sensor.crypto_inspect_whale_net_flow
        name: Whale Flow
        icon: mdi:fish
        icon_color: |
          {% set flow = states('sensor.crypto_inspect_whale_net_flow') | float(0) %}
          {% if flow > 0 %}green{% elif flow < 0 %}red{% else %}orange{% endif %}

      - type: custom:mushroom-template-card
        primary: "Exchange Flows"
        secondary: |
          {% set flows = states('sensor.crypto_inspect_exchange_netflows') | from_json %}
          BTC: {{ flows.BTC | default(0) }}
        icon: mdi:bank-transfer

      - type: custom:mushroom-entity-card
        entity: sensor.crypto_inspect_exchange_flow_signal
        name: Flow Signal
        icon: mdi:trending-up

      - type: custom:mushroom-entity-card
        entity: sensor.crypto_inspect_whale_last_alert
        name: Last Whale Alert
        icon: mdi:fish-alert

  # Risk Alerts
  - type: grid
    title: "âš ï¸ Risk Alerts"
    cards:
      - type: custom:mushroom-entity-card
        entity: sensor.crypto_inspect_liq_risk_level
        name: Liquidation Risk
        icon: mdi:alert-decagram
        icon_color: |
          {% set risk = states('sensor.crypto_inspect_liq_risk_level') %}
          {% if 'High' in risk %}red{% elif 'Medium' in risk %}orange{% else %}green{% endif %}

      - type: custom:mushroom-entity-card
        entity: sensor.crypto_inspect_unlock_risk_level
        name: Unlock Risk
        icon: mdi:lock-open-alert
        icon_color: |
          {% set risk = states('sensor.crypto_inspect_unlock_risk_level') %}
          {% if 'High' in risk %}red{% elif 'Medium' in risk %}orange{% else %}green{% endif %}

      - type: custom:mushroom-entity-card
        entity: sensor.crypto_inspect_market_tension
        name: Market Risk
        icon: mdi:shield-alert
        icon_color: |
          {% set tension = states('sensor.crypto_inspect_market_tension') %}
          {% if 'High' in tension %}red{% elif 'Medium' in tension %}orange{% else %}green{% endif %}

  # Macro & Events
  - type: grid
    title: "ðŸ“… Macro Events"
    cards:
      - type: custom:mushroom-entity-card
        entity: sensor.crypto_inspect_next_macro_event
        name: Next Event
        icon: mdi:calendar-star

      - type: custom:mushroom-entity-card
        entity: sensor.crypto_inspect_days_to_fomc
        name: Days to FOMC
        icon: mdi:calendar-clock

      - type: custom:mushroom-entity-card
        entity: sensor.crypto_inspect_macro_risk_week
        name: Macro Risk
        icon: mdi:calendar-alert
        icon_color: |
          {% set risk = states('sensor.crypto_inspect_macro_risk_week') %}
          {% if 'High' in risk %}red{% elif 'Medium' in risk %}orange{% else %}green{% endif %}

      - type: custom:mushroom-entity-card
        entity: sensor.crypto_inspect_unlocks_next_event
        name: Next Unlock
        icon: mdi:lock-open-variant

  # Briefings & Digests
  - type: grid
    title: "ðŸ“‹ Briefings"
    cards:
      - type: custom:mushroom-entity-card
        entity: sensor.crypto_inspect_morning_briefing
        name: Morning Briefing
        icon: mdi:weather-sunny

      - type: custom:mushroom-entity-card
        entity: sensor.crypto_inspect_evening_briefing
        name: Evening Briefing
        icon: mdi:weather-night

      - type: custom:mushroom-entity-card
        entity: sensor.crypto_inspect_daily_digest_ready
        name: Daily Digest
        icon: mdi:newspaper
        icon_color: |
          {% set ready = states('sensor.crypto_inspect_daily_digest_ready') %}
          {% if 'Ready' in ready %}green{% else %}orange{% endif %}

      - type: custom:mushroom-entity-card
        entity: sensor.crypto_inspect_briefing_last_sent
        name: Last Sent
        icon: mdi:clock-check
