# Crypto Inspect - Unlock Events Dashboard
# Token unlock schedules and vesting events

title: Unlock Events
path: unlock-events
icon: mdi:lock-open-variant
type: sections
max_columns: 3
sections:
  # Unlock Risk Assessment
  - type: grid
    title: "âš ï¸ Unlock Risk Levels"
    cards:
      - type: custom:mushroom-entity-card
        entity: sensor.crypto_inspect_unlock_risk_level
        name: Current Risk
        icon: mdi:lock-open-alert
        icon_color: |
          {% set risk = states('sensor.crypto_inspect_unlock_risk_level') %}
          {% if 'High' in risk %}red{% elif 'Medium' in risk %}orange{% else %}green{% endif %}

      - type: custom:mushroom-entity-card
        entity: sensor.crypto_inspect_unlocks_next_event
        name: Next Unlock
        icon: mdi:calendar-star

      - type: custom:mushroom-template-card
        primary: "Risk Symbols"
        secondary: |
          {% set symbols = state_attr('sensor.crypto_inspect_unlock_risk_level', 'symbols') %}
          {{ symbols | join(', ') if symbols else 'None' }}
        icon: mdi:alert-circle

      - type: custom:mushroom-entity-card
        entity: sensor.crypto_inspect_greed_level
        name: Market Greed
        icon: mdi:emoticon-devil
        icon_color: |
          {% set greed = states('sensor.crypto_inspect_greed_level') | int(50) %}
          {% if greed > 70 %}red{% elif greed > 40 %}orange{% else %}green{% endif %}

  # Unlock Details
  - type: grid
    title: "ðŸ“… Unlock Schedule"
    cards:
      - type: custom:mushroom-template-card
        primary: "Next Event Date"
        secondary: |
          {% set event = state_attr('sensor.crypto_inspect_unlocks_next_event', 'date') %}
          {{ event if event else 'No upcoming events' }}
        icon: mdi:calendar-clock

      - type: custom:mushroom-template-card
        primary: "Event Details"
        secondary: |
          {% set desc = state_attr('sensor.crypto_inspect_unlocks_next_event', 'description') %}
          {{ desc if desc else 'N/A' }}
        icon: mdi:information

      - type: custom:mushroom-template-card
        primary: "Estimated Impact"
        secondary: |
          {% set impact = state_attr('sensor.crypto_inspect_unlocks_next_event', 'impact') %}
          {{ impact if impact else 'Unknown' }}
        icon: mdi:chart-line-variant

      - type: custom:mushroom-entity-card
        entity: sensor.crypto_inspect_profit_action
        name: Profit Taking
        icon: mdi:cash-refund
        icon_color: |
          {% set action = states('sensor.crypto_inspect_profit_action') %}
          {% if 'Take Profit' in action %}red{% elif 'Hold' in action %}green{% else %}orange{% endif %}

  # Market Reaction Monitoring
  - type: grid
    title: "ðŸ“Š Market Reaction"
    cards:
      - type: custom:mushroom-template-card
        primary: "Pre-Event Analysis"
        secondary: |
          {% set analysis = state_attr('sensor.crypto_inspect_unlocks_next_event', 'pre_event_analysis') %}
          {{ analysis if analysis else 'No analysis available' }}
        icon: mdi:magnify

      - type: custom:mushroom-template-card
        primary: "Post-Event Tracking"
        secondary: |
          {% set tracking = state_attr('sensor.crypto_inspect_unlocks_next_event', 'post_event_tracking') %}
          {{ tracking if tracking else 'Not yet occurred' }}
        icon: mdi:eye-refresh

      - type: custom:mushroom-entity-card
        entity: sensor.crypto_inspect_derivatives
        name: Futures Data
        icon: mdi:chart-timeline-variant

      - type: custom:mushroom-template-card
        primary: "Volatility Forecast"
        secondary: |
          {% set vol = state_attr('sensor.crypto_inspect_unlocks_next_event', 'volatility_forecast') %}
          {{ vol | default('N/A') }}%
        icon: mdi:chart-bell-curve

  # Protective Measures
  - type: grid
    title: "ðŸ›¡ï¸ Risk Mitigation"
    cards:
      - type: custom:mushroom-template-card
        primary: "Protective Actions"
        secondary: |
          {% set measures = state_attr('sensor.crypto_inspect_unlock_risk_level', 'protective_measures') %}
          {{ measures | join(', ') if measures else 'None recommended' }}
        icon: mdi:shield-half-full

      - type: custom:mushroom-entity-card
        entity: sensor.crypto_inspect_stop_loss_recommendation
        name: Stop Loss
        icon: mdi:stop-circle-outline
        icon_color: red

      - type: custom:mushroom-template-card
        primary: "Timing Advice"
        secondary: |
          {% set timing = state_attr('sensor.crypto_inspect_unlocks_next_event', 'timing_advice') %}
          {{ timing if timing else 'Standard approach' }}
        icon: mdi:clock-time-four-outline

      - type: custom:mushroom-entity-card
        entity: sensor.crypto_inspect_dca_risk_score
        name: DCA Risk Score
        icon: mdi:gauge
        icon_color: |
          {% set score = states('sensor.crypto_inspect_dca_risk_score') | int(50) %}
          {% if score > 70 %}red{% elif score > 40 %}orange{% else %}green{% endif %}

  # Historical Context
  - type: grid
    title: "ðŸ“š Historical Data"
    cards:
      - type: custom:mushroom-template-card
        primary: "Past Unlocks"
        secondary: |
          {% set past = state_attr('sensor.crypto_inspect_unlocks_next_event', 'past_unlocks') %}
          {{ past | length if past else 0 }} events tracked
        icon: mdi:history

      - type: custom:mushroom-template-card
        primary: "Average Impact"
        secondary: |
          {% set avg = state_attr('sensor.crypto_inspect_unlocks_next_event', 'average_impact') %}
          {{ avg | default('N/A') }}%
        icon: mdi:math-compass

      - type: custom:mushroom-entity-card
        entity: sensor.crypto_inspect_success_rate
        name: Success Rate
        icon: mdi:trophy
        icon_color: |
          {% set rate = states('sensor.crypto_inspect_success_rate') | float(50) %}
          {% if rate > 70 %}green{% elif rate > 50 %}orange{% else %}red{% endif %}

      - type: custom:mushroom-template-card
        primary: "Market Cycle"
        secondary: |
          {% set cycle = state_attr('sensor.crypto_inspect_unlocks_next_event', 'market_cycle') %}
          {{ cycle if cycle else 'Normal' }}
        icon: mdi:sync-circle

  # Notification Settings
  - type: grid
    title: "ðŸ”” Notifications"
    cards:
      - type: custom:mushroom-entity-card
        entity: sensor.crypto_inspect_notification_mode
        name: Alert Mode
        icon: mdi:bell-cog

      - type: custom:mushroom-template-card
        primary: "Alert Thresholds"
        secondary: |
          High Risk: {{ state_attr('sensor.crypto_inspect_unlock_risk_level', 'high_risk_threshold') | default('N/A') }}
          Medium Risk: {{ state_attr('sensor.crypto_inspect_unlock_risk_level', 'medium_risk_threshold') | default('N/A') }}
        icon: mdi:alert-decagram-outline

      - type: custom:mushroom-entity-card
        entity: sensor.crypto_inspect_ready
        name: System Ready
        icon: mdi:checkbox-marked-circle
        icon_color: |
          {% set ready = states('sensor.crypto_inspect_ready') %}
          {% if 'Yes' in ready %}green{% else %}red{% endif %}

      - type: custom:mushroom-template-card
        primary: "Last Update"
        secondary: |
          {% set last = state_attr('sensor.crypto_inspect_unlocks_next_event', 'last_updated') %}
          {{ last if last else 'Unknown' }}
        icon: mdi:update
