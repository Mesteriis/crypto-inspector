# =============================================================================
# –†–´–ù–û–ß–ù–´–ï –£–°–õ–û–í–ò–Ø –ò –°–ï–ù–¢–ò–ú–ï–ù–¢
# =============================================================================
# –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–π —Ä—ã–Ω–∫–∞

# -----------------------------------------------------------------------------
# 24. Extreme Fear (Fear & Greed < 20)
# -----------------------------------------------------------------------------
- id: crypto_extreme_fear
  alias: "Crypto: –≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–π —Å—Ç—Ä–∞—Ö"
  description: "–ò–Ω–¥–µ–∫—Å —Å—Ç—Ä–∞—Ö–∞ –∏ –∂–∞–¥–Ω–æ—Å—Ç–∏ –≤ –∑–æ–Ω–µ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ–≥–æ —Å—Ç—Ä–∞—Ö–∞"
  trigger:
    - platform: numeric_state
      entity_id: sensor.crypto_inspect_fear_greed
      below: 20
  action:
    - service: notify.mobile_app
      data:
        title: "üò± –≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–π —Å—Ç—Ä–∞—Ö!"
        message: "Fear & Greed = {{ states('sensor.crypto_inspect_fear_greed') }}. –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏ —Ö–æ—Ä–æ—à–∏–π –º–æ–º–µ–Ω—Ç –¥–ª—è –ø–æ–∫—É–ø–∫–∏"
        data:
          tag: fear_greed

# -----------------------------------------------------------------------------
# 25. Extreme Greed (Fear & Greed > 80)
# -----------------------------------------------------------------------------
- id: crypto_extreme_greed
  alias: "Crypto: –≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–∞—è –∂–∞–¥–Ω–æ—Å—Ç—å"
  description: "–ò–Ω–¥–µ–∫—Å —Å—Ç—Ä–∞—Ö–∞ –∏ –∂–∞–¥–Ω–æ—Å—Ç–∏ –≤ –∑–æ–Ω–µ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ–π –∂–∞–¥–Ω–æ—Å—Ç–∏"
  trigger:
    - platform: numeric_state
      entity_id: sensor.crypto_inspect_fear_greed
      above: 80
  action:
    - service: notify.mobile_app
      data:
        title: "ü§ë –≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–∞—è –∂–∞–¥–Ω–æ—Å—Ç—å!"
        message: "Fear & Greed = {{ states('sensor.crypto_inspect_fear_greed') }}. –†—ã–Ω–æ–∫ –ø–µ—Ä–µ–≥—Ä–µ—Ç - –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å!"
        data:
          tag: fear_greed

# -----------------------------------------------------------------------------
# 26. –°–º–µ–Ω–∞ —Ä—ã–Ω–æ—á–Ω–æ–π —Ñ–∞–∑—ã
# -----------------------------------------------------------------------------
- id: crypto_market_phase_change
  alias: "Crypto: –°–º–µ–Ω–∞ —Ä—ã–Ω–æ—á–Ω–æ–π —Ñ–∞–∑—ã"
  description: "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ —Å–º–µ–Ω–µ —Ñ–∞–∑—ã —Ä—ã–Ω–∫–∞"
  trigger:
    - platform: state
      entity_id: sensor.crypto_inspect_investor_phase
  condition:
    - condition: template
      value_template: >
        {{ trigger.from_state.state != trigger.to_state.state and
           trigger.from_state.state not in ['unknown', 'unavailable'] }}
  action:
    - service: notify.mobile_app
      data:
        title: "üîÑ –°–º–µ–Ω–∞ —Ñ–∞–∑—ã —Ä—ã–Ω–∫–∞"
        message: "{{ trigger.from_state.state }} ‚Üí {{ trigger.to_state.state }}"

# -----------------------------------------------------------------------------
# 27. –ú–æ–∂–Ω–æ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞—Ç—å (Do Nothing OK)
# -----------------------------------------------------------------------------
- id: crypto_do_nothing_ok
  alias: "Crypto: –í—Ä–µ–º—è –æ—Ç–¥—ã—Ö–∞—Ç—å"
  description: "–†—ã–Ω–æ–∫ —Å–ø–æ–∫–æ–µ–Ω - –º–æ–∂–Ω–æ –Ω–µ –¥—ë—Ä–≥–∞—Ç—å—Å—è"
  trigger:
    - platform: state
      entity_id: sensor.crypto_inspect_do_nothing_ok
      to: "on"
  action:
    - service: notify.mobile_app
      data:
        title: "üòå –í—Ä–µ–º—è –æ—Ç–¥—ã—Ö–∞—Ç—å"
        message: "–†—ã–Ω–æ–∫ —Å–ø–æ–∫–æ–µ–Ω, –¥–µ–π—Å—Ç–≤–∏–π –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è"

# -----------------------------------------------------------------------------
# 28. –¢—Ä–µ–±—É–µ—Ç—Å—è –≤–Ω–∏–º–∞–Ω–∏–µ
# -----------------------------------------------------------------------------
- id: crypto_attention_required
  alias: "Crypto: –¢—Ä–µ–±—É–µ—Ç—Å—è –≤–Ω–∏–º–∞–Ω–∏–µ"
  description: "–†—ã–Ω–æ—á–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –∏–∑–º–µ–Ω–∏–ª–∏—Å—å - –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å"
  trigger:
    - platform: state
      entity_id: sensor.crypto_inspect_do_nothing_ok
      to: "off"
  action:
    - service: notify.mobile_app
      data:
        title: "üëÄ –¢—Ä–µ–±—É–µ—Ç—Å—è –≤–Ω–∏–º–∞–Ω–∏–µ"
        message: "–†—ã–Ω–æ—á–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –∏–∑–º–µ–Ω–∏–ª–∏—Å—å. –ü—Ä–æ–≤–µ—Ä—å –ø–æ–∑–∏—Ü–∏–∏"

# -----------------------------------------------------------------------------
# 29. –í—ã—Å–æ–∫–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å
# -----------------------------------------------------------------------------
- id: crypto_high_volatility
  alias: "Crypto: –í—ã—Å–æ–∫–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å"
  description: "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø–æ–≤—ã—à–µ–Ω–Ω–æ–π –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏"
  trigger:
    - platform: state
      entity_id: sensor.crypto_inspect_volatility_status
      to: "high"
  action:
    - service: notify.mobile_app
      data:
        title: "üìä –í—ã—Å–æ–∫–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å"
        message: "–í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å –≤—ã—Ä–æ—Å–ª–∞. –ë—É–¥—å –æ—Å—Ç–æ—Ä–æ–∂–µ–Ω —Å –ø–ª–µ—á–∞–º–∏!"

# -----------------------------------------------------------------------------
# 30. –ù–∞—á–∞–ª–æ Altseason
# -----------------------------------------------------------------------------
- id: crypto_altseason_start
  alias: "Crypto: –ù–∞—á–∞–ª–æ –∞–ª—å—Ç—Å–µ–∑–æ–Ω–∞"
  description: "–ò–Ω–¥–µ–∫—Å –∞–ª—å—Ç—Å–µ–∑–æ–Ω–∞ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –Ω–∞—á–∞–ª–æ –∞–ª—å—Ç—Å–µ–∑–æ–Ω–∞"
  trigger:
    - platform: numeric_state
      entity_id: sensor.crypto_inspect_altseason_index
      above: 75
  action:
    - service: notify.mobile_app
      data:
        title: "üöÄ Altseason!"
        message: "–ê–ª—å—Ç—Å–µ–∑–æ–Ω {{ states('sensor.crypto_inspect_altseason_index') }}%. –ê–ª—å—Ç—ã –º–æ–≥—É—Ç –æ–ø–µ—Ä–µ–∂–∞—Ç—å BTC"

# -----------------------------------------------------------------------------
# 31. BTC Dominance –ø–∞–¥–∞–µ—Ç
# -----------------------------------------------------------------------------
- id: crypto_btc_dominance_falling
  alias: "Crypto: BTC –¥–æ–º–∏–Ω–∞—Ü–∏—è –ø–∞–¥–∞–µ—Ç"
  description: "–ü–∞–¥–µ–Ω–∏–µ –¥–æ–º–∏–Ω–∞—Ü–∏–∏ BTC - –¥–µ–Ω—å–≥–∏ —Ç–µ–∫—É—Ç –≤ –∞–ª—å—Ç—ã"
  trigger:
    - platform: numeric_state
      entity_id: sensor.crypto_inspect_btc_dominance
      below: 50
  action:
    - service: notify.mobile_app
      data:
        title: "üìâ BTC.D < 50%"
        message: "–î–æ–º–∏–Ω–∞—Ü–∏—è Bitcoin —É–ø–∞–ª–∞ –Ω–∏–∂–µ 50%. –ê–ª—å—Ç–∫–æ–∏–Ω—ã —É–∫—Ä–µ–ø–ª—è—é—Ç—Å—è"

# -----------------------------------------------------------------------------
# 32. Stablecoin –ø—Ä–∏—Ç–æ–∫
# -----------------------------------------------------------------------------
- id: crypto_stablecoin_inflow
  alias: "Crypto: –ü—Ä–∏—Ç–æ–∫ —Å—Ç–µ–π–±–ª–∫–æ–∏–Ω–æ–≤"
  description: "–ë–æ–ª—å—à–æ–π –ø—Ä–∏—Ç–æ–∫ —Å—Ç–µ–π–±–ª–∫–æ–∏–Ω–æ–≤ –Ω–∞ –±–∏—Ä–∂–∏"
  trigger:
    - platform: template
      value_template: >
        {{ states('sensor.crypto_inspect_stablecoin_flow') | float(0) > 500000000 }}
  action:
    - service: notify.mobile_app
      data:
        title: "üíµ –ü—Ä–∏—Ç–æ–∫ —Å—Ç–µ–π–±–ª–æ–≤"
        message: "–ë–æ–ª—å—à–æ–π –ø—Ä–∏—Ç–æ–∫ —Å—Ç–µ–π–±–ª–∫–æ–∏–Ω–æ–≤ - –≤–æ–∑–º–æ–∂–Ω—ã–π —Ä–æ—Å—Ç —Å–ø—Ä–æ—Å–∞"
